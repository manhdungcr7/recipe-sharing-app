(this["webpackJsonprecipe-sharing-app"]=this["webpackJsonprecipe-sharing-app"]||[]).push([[0],{48:function(e,t,s){},49:function(e,t,s){},50:function(e,t,s){"use strict";s.r(t);var c=s(0),a=s.n(c),r=s(20),n=s(3),i=s(8),l=s(9),o=s(21);const j=s.n(o).a.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});j.interceptors.request.use((e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),j.interceptors.response.use((e=>e),(async e=>{if(e.response&&401===e.response.status){console.error("Authentication error:",e.response.data),localStorage.setItem("redirectAfterLogin",window.location.pathname);const t=e.response.data.message;(t.includes("h\u1ebft h\u1ea1n")||t.includes("kh\xf4ng h\u1ee3p l\u1ec7"))&&(alert("Phi\xean \u0111\u0103ng nh\u1eadp \u0111\xe3 h\u1ebft h\u1ea1n. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i."),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),window.location.href="/login")}return Promise.reject(e)}));var d=j;const h={login:async(e,t)=>{try{const s=await d.post("/auth/login",{email:e,password:t});return s.data.token&&(localStorage.setItem("auth_token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user))),s.data}catch(s){throw console.error("Login error:",s),s.response?s.response.data:s}},register:async e=>{try{return(await d.post("/auth/register",e)).data}catch(t){throw t.response?t.response.data:t}},googleLogin:async e=>{try{console.log("Attempting to log in with token:",e?"Token exists":"No token");const t=await d.post("/auth/google",{tokenId:e});return console.log("Login response:",t.data),t.data.token&&(localStorage.setItem("auth_token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user))),t.data}catch(t){throw console.error("Google login error:",t),t.response?t.response.data:t}},getCurrentUser:async()=>{try{return(await d.get("/auth/me")).data}catch(e){throw e.response?e.response.data:e}},logout:()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("user")},isAuthenticated:()=>!!localStorage.getItem("auth_token"),getUser:()=>JSON.parse(localStorage.getItem("user")),isAdmin:()=>{const e=h.getUser();return e&&"admin"===e.role}};var b=h,p=s(22),O=s(1);const x=Object(c.createContext)({currentUser:null,loading:!0,error:null,isAuthenticated:!1,login:(e,t)=>{},loginWithGoogle:e=>Promise.resolve(),logout:()=>{}}),m=e=>{let{children:t}=e;const[s,a]=Object(c.useState)(null),[r,n]=Object(c.useState)(!0),[i,l]=Object(c.useState)(null),[o,j]=Object(c.useState)(!1);Object(c.useEffect)((()=>{(async()=>{try{const t=localStorage.getItem("user"),s=localStorage.getItem("auth_token");if(s&&t){if(1e3*Object(p.a)(s).exp<Date.now())b.logout(),a(null),j(!1);else{a(JSON.parse(t)),j(!0);try{const e=await b.getCurrentUser();a(e.data)}catch(e){console.log("Could not fetch updated user info")}}}}catch(e){console.error("Auth check error:",e),b.logout(),a(null),j(!1)}finally{n(!1)}})()}),[]);const d={currentUser:s,loading:r,error:i,isAuthenticated:o,login:(e,t)=>{a(e),j(!0)},loginWithGoogle:async e=>{try{l(null),n(!0);const t=await b.googleLogin(e);return a(t.user),j(!0),t}catch(t){throw l(t.message||"Login failed"),t}finally{n(!1)}},logout:()=>{b.logout(),a(null),j(!1)}};return Object(O.jsx)(x.Provider,{value:d,children:t})};s(48),s(5),s(49);const u=()=>{const e=Object(n.q)(),[t,s]=Object(c.useState)(""),{currentUser:a,logout:r}=Object(c.useContext)(x);return Object(O.jsxs)("div",{className:"page home-page",children:[Object(O.jsx)("h1",{children:"Personal Profile"}),Object(O.jsxs)("div",{className:"search-bar",children:[Object(O.jsx)("input",{type:"text",placeholder:"Search recipes or users...",value:t,onChange:e=>s(e.target.value)}),Object(O.jsx)("button",{onClick:()=>{t.trim()&&e("/search?q=".concat(t))},children:"Search"})]}),Object(O.jsx)("div",{className:"profile-section",children:Object(O.jsxs)("div",{className:"profile-header",children:[Object(O.jsx)("div",{className:"profile-avatar",children:null!==a&&void 0!==a&&a.picture?Object(O.jsx)("img",{src:a.picture,alt:"Profile",className:"avatar-img"}):Object(O.jsx)("div",{className:"placeholder-avatar",children:"Avatar"})}),Object(O.jsxs)("div",{className:"profile-info",children:[Object(O.jsx)("h2",{children:(null===a||void 0===a?void 0:a.name)||"User Name"}),Object(O.jsx)("p",{className:"user-email",children:(null===a||void 0===a?void 0:a.email)||"email@example.com"}),Object(O.jsx)("button",{className:"logout-btn",onClick:()=>{r(),e("/login")},children:"Logout"})]})]})}),Object(O.jsxs)("div",{className:"profile-stats",children:[Object(O.jsx)("div",{className:"stat",children:"Followers: 0"}),Object(O.jsx)("div",{className:"stat",children:"Following: 0"}),Object(O.jsx)("div",{className:"stat",children:"Posts: 0"})]}),Object(O.jsx)("div",{className:"action-buttons",children:Object(O.jsx)("button",{className:"create-post-btn",onClick:()=>{e("/create")},children:"Create New Recipe"})}),Object(O.jsxs)("div",{className:"posts-container",children:[Object(O.jsx)("h2",{children:"Your Recipes"}),Object(O.jsx)("p",{children:"No recipes yet. Create your first recipe!"})]})]})},g=()=>Object(O.jsxs)("div",{className:"page search-results-page",children:[Object(O.jsx)("h1",{children:"Search Results"}),Object(O.jsxs)("div",{className:"search-bar",children:[Object(O.jsx)("input",{type:"text",placeholder:"Search recipes or users..."}),Object(O.jsx)("button",{children:"Search"})]}),Object(O.jsxs)("div",{className:"filters",children:[Object(O.jsx)("button",{children:"Recipes"}),Object(O.jsx)("button",{children:"Users"}),Object(O.jsx)("button",{children:"Ingredients"}),Object(O.jsx)("button",{children:"Cooking Methods"})]}),Object(O.jsx)("div",{className:"results-container",children:Object(O.jsx)("p",{children:"No results found."})})]}),v=()=>Object(O.jsxs)("div",{className:"page create-post-page",children:[Object(O.jsx)("h1",{children:"Create New Recipe"}),Object(O.jsxs)("form",{className:"recipe-form",children:[Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Recipe Name*"}),Object(O.jsx)("input",{type:"text",required:!0})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Upload Image"}),Object(O.jsx)("input",{type:"file",accept:"image/*"})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Ingredients*"}),Object(O.jsx)("textarea",{placeholder:"Enter ingredients with measurements",required:!0})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Cooking Time*"}),Object(O.jsx)("input",{type:"number",min:"1",placeholder:"Minutes",required:!0})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Cooking Steps*"}),Object(O.jsx)("textarea",{placeholder:"Describe the steps to prepare this recipe",required:!0})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{children:"Your Thoughts"}),Object(O.jsx)("textarea",{placeholder:"Share your thoughts about this recipe"})]}),Object(O.jsxs)("div",{className:"form-actions",children:[Object(O.jsx)("button",{type:"button",children:"Save as Draft"}),Object(O.jsx)("button",{type:"submit",children:"Publish"})]})]})]}),N=()=>{Object(n.q)();const{id:e}=Object(n.s)();return Object(O.jsxs)("div",{className:"page recipe-detail-page",children:[Object(O.jsx)("h1",{children:"Recipe Details"}),Object(O.jsxs)("div",{className:"recipe-header",children:[Object(O.jsx)("h2",{children:"Recipe Name"}),Object(O.jsxs)("div",{className:"recipe-meta",children:[Object(O.jsx)("span",{children:"By: User"}),Object(O.jsx)("span",{children:"Cooking Time: 0 mins"})]})]}),Object(O.jsx)("div",{className:"recipe-image",children:Object(O.jsx)("div",{className:"placeholder-image",children:"Recipe Image"})}),Object(O.jsxs)("div",{className:"recipe-ingredients",children:[Object(O.jsx)("h3",{children:"Ingredients"}),Object(O.jsx)("p",{children:"No ingredients listed."})]}),Object(O.jsxs)("div",{className:"recipe-steps",children:[Object(O.jsx)("h3",{children:"Instructions"}),Object(O.jsx)("p",{children:"No instructions provided."})]}),Object(O.jsxs)("div",{className:"recipe-actions",children:[Object(O.jsx)("button",{children:"Like"}),Object(O.jsx)("button",{children:"Save"}),Object(O.jsx)("button",{children:"Share"}),Object(O.jsx)("button",{children:"Export as PDF"}),Object(O.jsx)("button",{className:"chatbot-btn",children:"Ask Chatbot"})]}),Object(O.jsxs)("div",{className:"recipe-comments",children:[Object(O.jsx)("h3",{children:"Comments"}),Object(O.jsxs)("div",{className:"comment-form",children:[Object(O.jsx)("textarea",{placeholder:"Add a comment..."}),Object(O.jsx)("button",{children:"Post"})]}),Object(O.jsx)("div",{className:"comments-list",children:Object(O.jsx)("p",{children:"No comments yet."})})]})]})},f=()=>Object(O.jsxs)("div",{className:"page chatbot-page",children:[Object(O.jsx)("h1",{children:"Recipe Assistant Chatbot"}),Object(O.jsxs)("div",{className:"chat-container",children:[Object(O.jsx)("div",{className:"chat-messages",children:Object(O.jsx)("div",{className:"message bot",children:"Hello! I'm your recipe assistant. Ask me anything about this recipe!"})}),Object(O.jsxs)("div",{className:"chat-input",children:[Object(O.jsx)("input",{type:"text",placeholder:"Type your question..."}),Object(O.jsx)("button",{children:"Send"})]})]})]}),y=()=>Object(O.jsxs)("div",{className:"page user-profile-page",children:[Object(O.jsx)("h1",{children:"User Profile"}),Object(O.jsxs)("div",{className:"profile-header",children:[Object(O.jsx)("div",{className:"profile-avatar",children:Object(O.jsx)("div",{className:"placeholder-avatar",children:"User Avatar"})}),Object(O.jsxs)("div",{className:"profile-info",children:[Object(O.jsx)("h2",{children:"User Name"}),Object(O.jsxs)("div",{className:"profile-stats",children:[Object(O.jsx)("div",{className:"stat",children:"Followers: 0"}),Object(O.jsx)("div",{className:"stat",children:"Following: 0"}),Object(O.jsx)("div",{className:"stat",children:"Posts: 0"})]}),Object(O.jsx)("button",{className:"follow-btn",children:"Follow"})]})]}),Object(O.jsxs)("div",{className:"user-recipes",children:[Object(O.jsx)("h3",{children:"Recipes"}),Object(O.jsx)("div",{className:"recipes-grid",children:Object(O.jsx)("p",{children:"No recipes published yet."})})]})]}),S=()=>Object(O.jsxs)("div",{className:"page admin-page",children:[Object(O.jsx)("h1",{children:"Admin Dashboard"}),Object(O.jsxs)("div",{className:"admin-sections",children:[Object(O.jsxs)("div",{className:"reports-section",children:[Object(O.jsx)("h2",{children:"User Reports"}),Object(O.jsx)("p",{children:"No pending reports."})]}),Object(O.jsxs)("div",{className:"content-moderation",children:[Object(O.jsx)("h2",{children:"Content Moderation"}),Object(O.jsx)("p",{children:"No content waiting for review."})]}),Object(O.jsxs)("div",{className:"user-management",children:[Object(O.jsx)("h2",{children:"User Management"}),Object(O.jsxs)("div",{className:"user-search",children:[Object(O.jsx)("input",{type:"text",placeholder:"Search users..."}),Object(O.jsx)("button",{children:"Search"})]}),Object(O.jsx)("p",{children:"No users found."})]})]})]}),k=e=>{let{setIsLoggedIn:t}=e;const s=Object(n.q)(),[a,r]=Object(c.useState)(""),{loginWithGoogle:i}=Object(c.useContext)(x);return Object(O.jsxs)("div",{className:"page login-page",children:[Object(O.jsx)("h1",{children:"Login Page"}),a&&Object(O.jsx)("p",{className:"error-message",children:a}),Object(O.jsx)("div",{className:"login-container",children:Object(O.jsx)(l.a,{onSuccess:async e=>{try{await i(e.credential),t(!0),s("/")}catch(c){r("Authentication failed. Please try again."),console.error(c)}},onError:()=>{r("Google Sign-In failed. Please try again.")},useOneTap:!0,theme:"filled_blue",text:"signin_with",shape:"pill"})})]})};var w=function(){const[e,t]=Object(c.useState)(!1),[s,a]=Object(c.useState)(!0);return Object(c.useEffect)((()=>{const e=localStorage.getItem("auth_token");t(!!e)}),[]),Object(O.jsx)(l.b,{clientId:"202449099306-kkaij5aksnet6l64aahh5ia9o1gb25vk.apps.googleusercontent.com",children:Object(O.jsx)(m,{children:Object(O.jsx)(i.a,{children:Object(O.jsx)("div",{className:"App",children:Object(O.jsxs)(n.d,{children:[Object(O.jsx)(n.b,{path:"/login",element:Object(O.jsx)(k,{setIsLoggedIn:t})}),Object(O.jsx)(n.b,{path:"/",element:e?Object(O.jsx)(u,{}):Object(O.jsx)(n.a,{to:"/login"})}),Object(O.jsx)(n.b,{path:"/search",element:e?Object(O.jsx)(g,{}):Object(O.jsx)(n.a,{to:"/login"})}),Object(O.jsx)(n.b,{path:"/create-recipe",element:e?Object(O.jsx)(v,{}):Object(O.jsx)(n.a,{to:"/login"})}),Object(O.jsx)(n.b,{path:"/create",element:Object(O.jsx)(n.a,{to:"/create-recipe"})}),Object(O.jsx)(n.b,{path:"/recipe/:id",element:e?Object(O.jsx)(N,{}):Object(O.jsx)(n.a,{to:"/login"})}),Object(O.jsx)(n.b,{path:"/chatbot/:recipeId",element:e?Object(O.jsx)(f,{}):Object(O.jsx)(n.a,{to:"/login"})}),Object(O.jsx)(n.b,{path:"/profile/:id",element:e?Object(O.jsx)(y,{}):Object(O.jsx)(n.a,{to:"/login"})}),Object(O.jsx)(n.b,{path:"/admin",element:e&&s?Object(O.jsx)(S,{}):Object(O.jsx)(n.a,{to:"/login"})}),Object(O.jsx)(n.b,{path:"*",element:Object(O.jsx)(n.a,{to:"/"})})]})})})})})};try{const e=document.getElementById("root");Object(r.createRoot)(e).render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(w,{})}))}catch(I){console.error("React rendering error:",I),document.getElementById("root").innerHTML='\n    <div style="color: red; margin: 20px;">\n      <h2>Error initializing app</h2>\n      <p>'.concat(I.message,"</p>\n      <p>Please check the console for more details.</p>\n    </div>\n  ")}}},[[50,1,2]]]);
//# sourceMappingURL=main.fa9aff3b.chunk.js.map