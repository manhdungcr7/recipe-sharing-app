{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5000/api';\n\n// Tạo instance axios với cấu hình mặc định\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Thêm interceptors để xử lý token authentication\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('auth_token');\n  if (token) {\n    config.headers['Authorization'] = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Xử lý response và error global\napi.interceptors.response.use(response => {\n  return response;\n}, error => {\n  if (error.response && error.response.status === 401) {\n    // Lưu URL hiện tại để điều hướng trở lại sau khi đăng nhập\n    localStorage.setItem('redirectAfterLogin', window.location.pathname);\n\n    // Đăng xuất người dùng\n    localStorage.removeItem('auth_token');\n    localStorage.removeItem('user');\n\n    // Điều hướng đến trang đăng nhập\n    window.location.href = '/login';\n  }\n  return Promise.reject(error);\n});\n\n// Example API calls\nexport const fetchRecipes = async () => {\n  const response = await api.get('/recipes');\n  return response.data;\n};\nexport const fetchRecipeById = async id => {\n  const response = await api.get(`/recipes/${id}`);\n  return response.data;\n};\nexport const createRecipe = async recipeData => {\n  const response = await api.post('/recipes', recipeData);\n  return response.data;\n};\nexport const updateRecipe = async (id, recipeData) => {\n  const response = await api.put(`/recipes/${id}`, recipeData);\n  return response.data;\n};\nexport const deleteRecipe = async id => {\n  const response = await api.delete(`/recipes/${id}`);\n  return response.data;\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","error","Promise","reject","response","status","setItem","window","location","pathname","removeItem","href","fetchRecipes","get","data","fetchRecipeById","id","createRecipe","recipeData","post","updateRecipe","put","deleteRecipe","delete"],"sources":["C:/Users/Lenovo/Documents/web_SE/recipe-sharing-app/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5000/api';\n\n// Tạo instance axios với cấu hình mặc định\nconst api = axios.create({\n    baseURL: API_BASE_URL,\n    headers: {\n        'Content-Type': 'application/json',\n    },\n});\n\n// Thêm interceptors để xử lý token authentication\napi.interceptors.request.use(\n    (config) => {\n        const token = localStorage.getItem('auth_token');\n        if (token) {\n            config.headers['Authorization'] = `Bearer ${token}`;\n        }\n        return config;\n    },\n    (error) => {\n        return Promise.reject(error);\n    }\n);\n\n// Xử lý response và error global\napi.interceptors.response.use(\n    (response) => {\n        return response;\n    },\n    (error) => {\n        if (error.response && error.response.status === 401) {\n            // Lưu URL hiện tại để điều hướng trở lại sau khi đăng nhập\n            localStorage.setItem('redirectAfterLogin', window.location.pathname);\n            \n            // Đăng xuất người dùng\n            localStorage.removeItem('auth_token');\n            localStorage.removeItem('user');\n            \n            // Điều hướng đến trang đăng nhập\n            window.location.href = '/login';\n        }\n        return Promise.reject(error);\n    }\n);\n\n// Example API calls\nexport const fetchRecipes = async () => {\n    const response = await api.get('/recipes');\n    return response.data;\n};\n\nexport const fetchRecipeById = async (id) => {\n    const response = await api.get(`/recipes/${id}`);\n    return response.data;\n};\n\nexport const createRecipe = async (recipeData) => {\n    const response = await api.post('/recipes', recipeData);\n    return response.data;\n};\n\nexport const updateRecipe = async (id, recipeData) => {\n    const response = await api.put(`/recipes/${id}`, recipeData);\n    return response.data;\n};\n\nexport const deleteRecipe = async (id) => {\n    const response = await api.delete(`/recipes/${id}`);\n    return response.data;\n};\n\nexport default api;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,IAAI,2BAA2B;;AAEtF;AACA,MAAMC,GAAG,GAAGL,KAAK,CAACM,MAAM,CAAC;EACrBC,OAAO,EAAEN,YAAY;EACrBO,OAAO,EAAE;IACL,cAAc,EAAE;EACpB;AACJ,CAAC,CAAC;;AAEF;AACAH,GAAG,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CACvBC,MAAM,IAAK;EACR,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;EAChD,IAAIF,KAAK,EAAE;IACPD,MAAM,CAACJ,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUK,KAAK,EAAE;EACvD;EACA,OAAOD,MAAM;AACjB,CAAC,EACAI,KAAK,IAAK;EACP,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CACJ,CAAC;;AAED;AACAX,GAAG,CAACI,YAAY,CAACU,QAAQ,CAACR,GAAG,CACxBQ,QAAQ,IAAK;EACV,OAAOA,QAAQ;AACnB,CAAC,EACAH,KAAK,IAAK;EACP,IAAIA,KAAK,CAACG,QAAQ,IAAIH,KAAK,CAACG,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;IACjD;IACAN,YAAY,CAACO,OAAO,CAAC,oBAAoB,EAAEC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAAC;;IAEpE;IACAV,YAAY,CAACW,UAAU,CAAC,YAAY,CAAC;IACrCX,YAAY,CAACW,UAAU,CAAC,MAAM,CAAC;;IAE/B;IACAH,MAAM,CAACC,QAAQ,CAACG,IAAI,GAAG,QAAQ;EACnC;EACA,OAAOT,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CACJ,CAAC;;AAED;AACA,OAAO,MAAMW,YAAY,GAAG,MAAAA,CAAA,KAAY;EACpC,MAAMR,QAAQ,GAAG,MAAMd,GAAG,CAACuB,GAAG,CAAC,UAAU,CAAC;EAC1C,OAAOT,QAAQ,CAACU,IAAI;AACxB,CAAC;AAED,OAAO,MAAMC,eAAe,GAAG,MAAOC,EAAE,IAAK;EACzC,MAAMZ,QAAQ,GAAG,MAAMd,GAAG,CAACuB,GAAG,CAAC,YAAYG,EAAE,EAAE,CAAC;EAChD,OAAOZ,QAAQ,CAACU,IAAI;AACxB,CAAC;AAED,OAAO,MAAMG,YAAY,GAAG,MAAOC,UAAU,IAAK;EAC9C,MAAMd,QAAQ,GAAG,MAAMd,GAAG,CAAC6B,IAAI,CAAC,UAAU,EAAED,UAAU,CAAC;EACvD,OAAOd,QAAQ,CAACU,IAAI;AACxB,CAAC;AAED,OAAO,MAAMM,YAAY,GAAG,MAAAA,CAAOJ,EAAE,EAAEE,UAAU,KAAK;EAClD,MAAMd,QAAQ,GAAG,MAAMd,GAAG,CAAC+B,GAAG,CAAC,YAAYL,EAAE,EAAE,EAAEE,UAAU,CAAC;EAC5D,OAAOd,QAAQ,CAACU,IAAI;AACxB,CAAC;AAED,OAAO,MAAMQ,YAAY,GAAG,MAAON,EAAE,IAAK;EACtC,MAAMZ,QAAQ,GAAG,MAAMd,GAAG,CAACiC,MAAM,CAAC,YAAYP,EAAE,EAAE,CAAC;EACnD,OAAOZ,QAAQ,CAACU,IAAI;AACxB,CAAC;AAED,eAAexB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module"}