{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Documents\\\\web_SE\\\\recipe-sharing-app\\\\src\\\\components\\\\common\\\\Header.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useCallback, memo } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../../context/AuthContext';\nimport './Header.css';\n\n// Sử dụng memo để tránh re-render không cần thiết\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Header = /*#__PURE__*/_s(/*#__PURE__*/memo(_c = _s(() => {\n  _s();\n  const {\n    currentUser,\n    logout,\n    isAuthenticated\n  } = useContext(AuthContext);\n  const [searchQuery, setSearchQuery] = useState('');\n  const navigate = useNavigate();\n\n  // Sử dụng useCallback để không tạo lại hàm mỗi khi render\n  const handleSearch = useCallback(e => {\n    e.preventDefault();\n    if (searchQuery.trim()) {\n      navigate(`/search?q=${encodeURIComponent(searchQuery)}`);\n    }\n  }, [searchQuery, navigate]);\n  const handleLogout = useCallback(() => {\n    localStorage.removeItem('auth_token');\n    localStorage.removeItem('user');\n    localStorage.removeItem('profile_data_timestamp');\n    logout();\n    navigate('/home');\n  }, [logout, navigate]);\n\n  // Xác định trước các giá trị để tránh tính toán lại khi render\n  const userName = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.name) || 'Người dùng';\n  const userAvatar = (currentUser === null || currentUser === void 0 ? void 0 : currentUser.picture) || '/default-avatar.jpg';\n  const userId = currentUser === null || currentUser === void 0 ? void 0 : currentUser.id;\n  const logoLink = isAuthenticated ? \"/dashboard\" : \"/\";\n\n  // Sử dụng useState để theo dõi trạng thái đã tải hình ảnh\n  const [avatarLoaded, setAvatarLoaded] = useState(false);\n\n  // Xử lý sự kiện khi ảnh tải xong\n  const handleImageLoad = () => {\n    setAvatarLoaded(true);\n  };\n  const handleImageError = e => {\n    e.target.src = '/default-avatar.jpg';\n    setAvatarLoaded(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    className: \"main-header\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-logo\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: logoLink,\n          children: \"Recipe Sharing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSearch,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"T\\xECm ki\\u1EBFm c\\xF4ng th\\u1EE9c...\",\n            value: searchQuery,\n            onChange: e => setSearchQuery(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"header-nav\",\n        children: isAuthenticated ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/dashboard\",\n            children: \"Trang ch\\u1EE7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/create-recipe\",\n            children: \"T\\u1EA1o c\\xF4ng th\\u1EE9c\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-menu\",\n            children: [currentUser && /*#__PURE__*/_jsxDEV(Link, {\n              to: `/profile/${userId}`,\n              className: \"user-profile-link\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: userAvatar,\n                alt: userName,\n                className: \"avatar-small\",\n                width: \"32\",\n                height: \"32\",\n                onLoad: handleImageLoad,\n                onError: handleImageError\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: userName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleLogout,\n              className: \"logout-btn\",\n              children: \"\\u0110\\u0103ng xu\\u1EA5t\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            className: \"nav-login\",\n            children: \"\\u0110\\u0103ng nh\\u1EADp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/register\",\n            className: \"nav-register\",\n            children: \"\\u0110\\u0103ng k\\xFD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n}, \"ugxSQa7iG40M+mXD244BAX39K5Y=\", false, function () {\n  return [useNavigate];\n})), \"ugxSQa7iG40M+mXD244BAX39K5Y=\", false, function () {\n  return [useNavigate];\n});\n_c2 = Header;\nexport default Header;\nvar _c, _c2;\n$RefreshReg$(_c, \"Header$memo\");\n$RefreshReg$(_c2, \"Header\");","map":{"version":3,"names":["React","useContext","useState","useCallback","memo","Link","useNavigate","AuthContext","jsxDEV","_jsxDEV","Fragment","_Fragment","Header","_s","_c","currentUser","logout","isAuthenticated","searchQuery","setSearchQuery","navigate","handleSearch","e","preventDefault","trim","encodeURIComponent","handleLogout","localStorage","removeItem","userName","name","userAvatar","picture","userId","id","logoLink","avatarLoaded","setAvatarLoaded","handleImageLoad","handleImageError","target","src","className","children","to","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","alt","width","height","onLoad","onError","onClick","_c2","$RefreshReg$"],"sources":["C:/Users/Lenovo/Documents/web_SE/recipe-sharing-app/src/components/common/Header.jsx"],"sourcesContent":["import React, { useContext, useState, useCallback, memo } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../../context/AuthContext';\nimport './Header.css';\n\n// Sử dụng memo để tránh re-render không cần thiết\nconst Header = memo(() => {\n    const { currentUser, logout, isAuthenticated } = useContext(AuthContext);\n    const [searchQuery, setSearchQuery] = useState('');\n    const navigate = useNavigate();\n    \n    // Sử dụng useCallback để không tạo lại hàm mỗi khi render\n    const handleSearch = useCallback((e) => {\n        e.preventDefault();\n        if (searchQuery.trim()) {\n            navigate(`/search?q=${encodeURIComponent(searchQuery)}`);\n        }\n    }, [searchQuery, navigate]);\n    \n    const handleLogout = useCallback(() => {\n        localStorage.removeItem('auth_token');\n        localStorage.removeItem('user');\n        localStorage.removeItem('profile_data_timestamp');\n        logout();\n        navigate('/home');\n    }, [logout, navigate]);\n\n    // Xác định trước các giá trị để tránh tính toán lại khi render\n    const userName = currentUser?.name || 'Người dùng';\n    const userAvatar = currentUser?.picture || '/default-avatar.jpg';\n    const userId = currentUser?.id;\n    const logoLink = isAuthenticated ? \"/dashboard\" : \"/\";\n\n    // Sử dụng useState để theo dõi trạng thái đã tải hình ảnh\n    const [avatarLoaded, setAvatarLoaded] = useState(false);\n\n    // Xử lý sự kiện khi ảnh tải xong\n    const handleImageLoad = () => {\n        setAvatarLoaded(true);\n    };\n\n    const handleImageError = (e) => {\n        e.target.src = '/default-avatar.jpg';\n        setAvatarLoaded(true);\n    };\n\n    return (\n        <header className=\"main-header\">\n            <div className=\"header-container\">\n                <div className=\"header-logo\">\n                    <Link to={logoLink}>Recipe Sharing</Link>\n                </div>\n                \n                <div className=\"search-bar\">\n                    <form onSubmit={handleSearch}>\n                        <input\n                            type=\"text\"\n                            placeholder=\"Tìm kiếm công thức...\"\n                            value={searchQuery}\n                            onChange={e => setSearchQuery(e.target.value)}\n                        />\n                        <button type=\"submit\">\n                            <i className=\"fas fa-search\"></i>\n                        </button>\n                    </form>\n                </div>\n                \n                <nav className=\"header-nav\">\n                    {isAuthenticated ? (\n                        <>\n                            <Link to=\"/dashboard\">Trang chủ</Link>\n                            <Link to=\"/create-recipe\">Tạo công thức</Link>\n                            <div className=\"user-menu\">\n                                {currentUser && (\n                                    <Link to={`/profile/${userId}`} className=\"user-profile-link\">\n                                        <img \n                                            src={userAvatar}\n                                            alt={userName}\n                                            className=\"avatar-small\"\n                                            width=\"32\"\n                                            height=\"32\"\n                                            onLoad={handleImageLoad}\n                                            onError={handleImageError}\n                                        />\n                                        <span>{userName}</span>\n                                    </Link>\n                                )}\n                                <button onClick={handleLogout} className=\"logout-btn\">Đăng xuất</button>\n                            </div>\n                        </>\n                    ) : (\n                        <>\n                            <Link to=\"/login\" className=\"nav-login\">Đăng nhập</Link>\n                            <Link to=\"/register\" className=\"nav-register\">Đăng ký</Link>\n                        </>\n                    )}\n                </nav>\n            </div>\n        </header>\n    );\n});\n\nexport default Header;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}