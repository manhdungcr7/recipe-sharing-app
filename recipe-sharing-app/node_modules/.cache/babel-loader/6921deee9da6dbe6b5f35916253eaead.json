{"ast":null,"code":"import api from'./api';const authService={// Đăng nhập truyền thống\nlogin:async(email,password)=>{try{const response=await api.post('/auth/login',{email,password});// Lưu thông tin đăng nhập vào localStorage\nif(response.data.token){localStorage.setItem('auth_token',response.data.token);localStorage.setItem('user',JSON.stringify(response.data.user));}return response.data;}catch(error){console.error(\"Login error:\",error);throw error.response?error.response.data:error;}},// Đăng ký tài khoản\nregister:async userData=>{try{const response=await api.post('/auth/register',userData);return response.data;}catch(error){throw error.response?error.response.data:error;}},// Đăng nhập bằng Google (giữ lại nếu vẫn muốn dùng)\ngoogleLogin:async tokenId=>{try{console.log(\"Attempting to log in with token:\",tokenId?\"Token exists\":\"No token\");const response=await api.post('/auth/google',{tokenId});console.log(\"Login response:\",response.data);// Lưu thông tin đăng nhập vào localStorage\nif(response.data.token){localStorage.setItem('auth_token',response.data.token);localStorage.setItem('user',JSON.stringify(response.data.user));}return response.data;}catch(error){console.error(\"Google login error:\",error);throw error.response?error.response.data:error;}},// Lấy thông tin người dùng hiện tại\ngetCurrentUser:async()=>{try{const response=await api.get('/auth/me');return response.data;}catch(error){throw error.response?error.response.data:error;}},// Đăng xuất\nlogout:()=>{localStorage.removeItem('auth_token');localStorage.removeItem('user');},// Kiểm tra nếu đã đăng nhập\nisAuthenticated:()=>{return!!localStorage.getItem('auth_token');},// Lấy thông tin người dùng từ localStorage\ngetUser:()=>{return JSON.parse(localStorage.getItem('user'));},// Kiểm tra nếu là admin\nisAdmin:()=>{const user=authService.getUser();return user&&user.role==='admin';}};export default authService;","map":{"version":3,"names":["api","authService","login","email","password","response","post","data","token","localStorage","setItem","JSON","stringify","user","error","console","register","userData","googleLogin","tokenId","log","getCurrentUser","get","logout","removeItem","isAuthenticated","getItem","getUser","parse","isAdmin","role"],"sources":["C:/Users/Lenovo/Documents/web_SE/recipe-sharing-app/src/services/authService.js"],"sourcesContent":["import api from './api';\n\nconst authService = {\n    // Đăng nhập truyền thống\n    login: async (email, password) => {\n        try {\n            const response = await api.post('/auth/login', { email, password });\n            \n            // Lưu thông tin đăng nhập vào localStorage\n            if (response.data.token) {\n                localStorage.setItem('auth_token', response.data.token);\n                localStorage.setItem('user', JSON.stringify(response.data.user));\n            }\n            \n            return response.data;\n        } catch (error) {\n            console.error(\"Login error:\", error);\n            throw error.response ? error.response.data : error;\n        }\n    },\n    \n    // Đăng ký tài khoản\n    register: async (userData) => {\n        try {\n            const response = await api.post('/auth/register', userData);\n            return response.data;\n        } catch (error) {\n            throw error.response ? error.response.data : error;\n        }\n    },\n    \n    // Đăng nhập bằng Google (giữ lại nếu vẫn muốn dùng)\n    googleLogin: async (tokenId) => {\n        try {\n            console.log(\"Attempting to log in with token:\", tokenId ? \"Token exists\" : \"No token\");\n            const response = await api.post('/auth/google', { tokenId });\n            console.log(\"Login response:\", response.data);\n            \n            // Lưu thông tin đăng nhập vào localStorage\n            if (response.data.token) {\n                localStorage.setItem('auth_token', response.data.token);\n                localStorage.setItem('user', JSON.stringify(response.data.user));\n            }\n            \n            return response.data;\n        } catch (error) {\n            console.error(\"Google login error:\", error);\n            throw error.response ? error.response.data : error;\n        }\n    },\n\n    // Lấy thông tin người dùng hiện tại\n    getCurrentUser: async () => {\n        try {\n            const response = await api.get('/auth/me');\n            return response.data;\n        } catch (error) {\n            throw error.response ? error.response.data : error;\n        }\n    },\n    \n    // Đăng xuất\n    logout: () => {\n        localStorage.removeItem('auth_token');\n        localStorage.removeItem('user');\n    },\n\n    // Kiểm tra nếu đã đăng nhập\n    isAuthenticated: () => {\n        return !!localStorage.getItem('auth_token');\n    },\n\n    // Lấy thông tin người dùng từ localStorage\n    getUser: () => {\n        return JSON.parse(localStorage.getItem('user'));\n    },\n\n    // Kiểm tra nếu là admin\n    isAdmin: () => {\n        const user = authService.getUser();\n        return user && user.role === 'admin';\n    }\n};\n\nexport default authService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}