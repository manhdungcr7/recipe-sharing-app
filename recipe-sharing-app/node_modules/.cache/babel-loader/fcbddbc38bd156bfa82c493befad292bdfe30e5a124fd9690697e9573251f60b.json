{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Documents\\\\web_SE\\\\recipe-sharing-app\\\\src\\\\pages\\\\EditRecipePage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\nimport './CreateRecipePage.css'; // Sử dụng lại CSS từ CreateRecipePage\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditRecipePage = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    currentUser,\n    isAuthenticated\n  } = useContext(AuthContext);\n\n  // State giống như CreateRecipePage\n  const [title, setTitle] = useState('');\n  const [image, setImage] = useState(null);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [cookingTime, setCookingTime] = useState('');\n  const [thoughts, setThoughts] = useState('');\n  const [ingredients, setIngredients] = useState([{\n    name: '',\n    quantity: '',\n    unit: ''\n  }]);\n  const [steps, setSteps] = useState([{\n    description: '',\n    image: null,\n    imagePreview: null\n  }]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isPublished, setIsPublished] = useState(false); // Biến kiểm tra là bản đã đăng hay bản nháp\n  const [originalImageUrl, setOriginalImageUrl] = useState('');\n  useEffect(() => {\n    // Kiểm tra đăng nhập\n    if (!isAuthenticated) {\n      alert(\"Bạn cần đăng nhập để chỉnh sửa công thức\");\n      localStorage.setItem('redirectAfterLogin', `/edit-recipe/${id}`);\n      navigate('/login');\n      return;\n    }\n    fetchRecipeData();\n  }, [id, isAuthenticated, navigate]);\n  const fetchRecipeData = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError(\"Bạn cần đăng nhập để chỉnh sửa công thức\");\n        return;\n      }\n\n      // Thử lấy từ API bản nháp trước\n      let response = await fetch(`http://localhost:5000/api/recipes/draft/${id}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      // Nếu không phải bản nháp, thử lấy từ API công thức đã đăng\n      if (response.status === 404) {\n        setIsPublished(true);\n        response = await fetch(`http://localhost:5000/api/recipes/${id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n      }\n      if (!response.ok) {\n        if (response.status === 403) {\n          throw new Error(\"Bạn không có quyền chỉnh sửa công thức này\");\n        } else if (response.status === 404) {\n          throw new Error(\"Không tìm thấy công thức\");\n        } else {\n          throw new Error(\"Không thể tải thông tin công thức\");\n        }\n      }\n      const data = await response.json();\n      const recipe = data.data;\n\n      // Kiểm tra quyền chỉnh sửa\n      if (recipe.author_id !== (currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n        throw new Error(\"Bạn không có quyền chỉnh sửa công thức này\");\n      }\n\n      // Đổ dữ liệu vào form\n      setTitle(recipe.title || '');\n      setCookingTime(recipe.cooking_time || '');\n      setThoughts(recipe.thoughts || '');\n      setOriginalImageUrl(recipe.image_url || '');\n      setImagePreview(recipe.image_url ? `http://localhost:5000${recipe.image_url}` : null);\n\n      // Đổ dữ liệu nguyên liệu\n      if (recipe.ingredients && recipe.ingredients.length > 0) {\n        const formattedIngredients = recipe.ingredients.map(ing => ({\n          name: ing.name,\n          quantity: ing.quantity,\n          unit: ing.unit\n        }));\n        setIngredients(formattedIngredients);\n      } else {\n        setIngredients([{\n          name: '',\n          quantity: '',\n          unit: ''\n        }]);\n      }\n\n      // Đổ dữ liệu các bước\n      if (recipe.steps && recipe.steps.length > 0) {\n        const formattedSteps = recipe.steps.map(step => ({\n          description: step.description,\n          image: null,\n          imagePreview: step.image_url ? `http://localhost:5000${step.image_url}` : null\n        }));\n        setSteps(formattedSteps);\n      } else {\n        setSteps([{\n          description: '',\n          image: null,\n          imagePreview: null\n        }]);\n      }\n    } catch (error) {\n      console.error('Error fetching recipe data:', error);\n      setError(error.message || 'Không thể tải thông tin công thức');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Xử lý thêm nguyên liệu\n  const handleAddIngredient = () => {\n    setIngredients([...ingredients, {\n      name: '',\n      quantity: '',\n      unit: ''\n    }]);\n  };\n\n  // Xử lý xóa nguyên liệu\n  const handleRemoveIngredient = index => {\n    const newIngredients = [...ingredients];\n    newIngredients.splice(index, 1);\n    setIngredients(newIngredients);\n  };\n\n  // Xử lý thay đổi nguyên liệu\n  const handleIngredientChange = (index, field, value) => {\n    const newIngredients = [...ingredients];\n    newIngredients[index][field] = value;\n    setIngredients(newIngredients);\n  };\n\n  // Xử lý thêm bước\n  const handleAddStep = () => {\n    setSteps([...steps, {\n      description: '',\n      image: null,\n      imagePreview: null\n    }]);\n  };\n\n  // Xử lý xóa bước\n  const handleRemoveStep = index => {\n    const newSteps = [...steps];\n    newSteps.splice(index, 1);\n    setSteps(newSteps);\n  };\n\n  // Xử lý thay đổi bước\n  const handleStepChange = (index, field, value) => {\n    const newSteps = [...steps];\n    newSteps[index][field] = value;\n    setSteps(newSteps);\n  };\n\n  // Xử lý thay đổi hình ảnh bước\n  const handleStepImageChange = (e, index) => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const newSteps = [...steps];\n        newSteps[index].image = file;\n        newSteps[index].imagePreview = reader.result;\n        setSteps(newSteps);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  // Xử lý thay đổi hình ảnh chính\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setImage(file);\n        setImagePreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  // Xử lý lưu thay đổi\n  const handleSaveChanges = async e => {\n    e.preventDefault();\n    try {\n      // Validate\n      if (!title) {\n        setError('Vui lòng nhập tên món ăn');\n        return;\n      }\n      setIsSubmitting(true);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError('Bạn cần đăng nhập để lưu thay đổi');\n        return;\n      }\n      const formData = new FormData();\n      formData.append('title', title);\n      formData.append('cookingTime', cookingTime || '0');\n      formData.append('thoughts', thoughts || '');\n\n      // Thêm hình ảnh mới nếu có\n      if (image) {\n        formData.append('image', image);\n      }\n\n      // Thêm dữ liệu nguyên liệu\n      formData.append('ingredients', JSON.stringify(ingredients));\n\n      // Thêm dữ liệu các bước\n      formData.append('steps', JSON.stringify(steps.map(step => ({\n        description: step.description\n      }))));\n\n      // Thêm hình ảnh cho từng bước nếu có\n      steps.forEach((step, index) => {\n        if (step.image) {\n          formData.append(`step_images[${index}]`, step.image);\n        }\n      });\n\n      // Gọi API cập nhật\n      let url = isPublished ? `http://localhost:5000/api/recipes/${id}` : `http://localhost:5000/api/recipes/draft/${id}`;\n      const response = await fetch(url, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        body: formData\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Không thể cập nhật công thức');\n      }\n      setSuccess(true);\n      alert(isPublished ? 'Đã cập nhật công thức thành công!' : 'Đã lưu bản nháp thành công!');\n\n      // Chuyển hướng về trang chi tiết công thức nếu đã publish, hoặc về dashboard nếu là draft\n      setTimeout(() => {\n        if (isPublished) {\n          navigate(`/recipe/${id}`);\n        } else {\n          localStorage.setItem('activeProfileTab', 'drafts');\n          navigate('/dashboard');\n        }\n      }, 1000);\n    } catch (error) {\n      console.error('Error updating recipe:', error);\n      setError(error.message || 'Đã có lỗi xảy ra khi cập nhật công thức');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Xử lý đăng bản nháp\n  const handlePublishDraft = async () => {\n    if (!isPublished) {\n      if (window.confirm('Bạn có chắc muốn đăng công thức này?')) {\n        try {\n          setIsSubmitting(true);\n          const token = localStorage.getItem('token');\n          const response = await fetch(`http://localhost:5000/api/recipes/draft/${id}/publish`, {\n            method: 'POST',\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n          if (!response.ok) {\n            const errorData = await response.json();\n            throw new Error(errorData.message || 'Không thể đăng công thức');\n          }\n          const data = await response.json();\n          setSuccess(true);\n          alert('Đã đăng công thức thành công!');\n\n          // Chuyển hướng đến trang chi tiết công thức\n          setTimeout(() => {\n            navigate(`/recipe/${data.data.id}`);\n          }, 1000);\n        } catch (error) {\n          console.error('Error publishing draft:', error);\n          setError(error.message || 'Đã có lỗi xảy ra khi đăng công thức');\n        } finally {\n          setIsSubmitting(false);\n        }\n      }\n    }\n  };\n\n  // Thêm form UI\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"create-recipe-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: isPublished ? 'Chỉnh sửa công thức' : 'Chỉnh sửa bản nháp'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"create-recipe-container\",\n        children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-exclamation-circle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 15\n          }, this), error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"success-message\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-check-circle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this), isPublished ? 'Công thức đã được cập nhật thành công!' : 'Bản nháp đã được lưu thành công!']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSaveChanges,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"title\",\n              children: [\"T\\xEAn m\\xF3n \\u0103n \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"required\",\n                children: \"*\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 49\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"title\",\n              value: title,\n              onChange: e => setTitle(e.target.value),\n              placeholder: \"Nh\\u1EADp t\\xEAn m\\xF3n \\u0103n\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"image\",\n              children: \"H\\xECnh \\u1EA3nh m\\xF3n \\u0103n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-upload-container\",\n              children: imagePreview ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-preview\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imagePreview,\n                  alt: \"Preview\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"remove-image\",\n                  onClick: () => {\n                    setImage(null);\n                    setImagePreview(null);\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-times\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 367,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"image-upload\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"image-upload\",\n                  className: \"upload-label\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-cloud-upload-alt\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 373,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"T\\u1EA3i l\\xEAn h\\xECnh \\u1EA3nh\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 374,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 372,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  id: \"image-upload\",\n                  accept: \"image/*\",\n                  onChange: handleImageChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"cookingTime\",\n              children: \"Th\\u1EDDi gian n\\u1EA5u (ph\\xFAt)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              id: \"cookingTime\",\n              value: cookingTime,\n              onChange: e => setCookingTime(e.target.value),\n              placeholder: \"Nh\\u1EADp th\\u1EDDi gian n\\u1EA5u\",\n              min: \"0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"thoughts\",\n              children: \"Suy ngh\\u0129 c\\u1EE7a t\\xE1c gi\\u1EA3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              id: \"thoughts\",\n              value: thoughts,\n              onChange: e => setThoughts(e.target.value),\n              placeholder: \"Chia s\\u1EBB c\\u1EA3m ngh\\u0129, ngu\\u1ED3n g\\u1ED1c, hay c\\xE2u chuy\\u1EC7n v\\u1EC1 m\\xF3n \\u0103n n\\xE0y...\",\n              rows: \"4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Nguy\\xEAn li\\u1EC7u\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 15\n            }, this), ingredients.map((ingredient, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ingredient-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"T\\xEAn nguy\\xEAn li\\u1EC7u\",\n                value: ingredient.name,\n                onChange: e => handleIngredientChange(index, 'name', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"S\\u1ED1 l\\u01B0\\u1EE3ng\",\n                value: ingredient.quantity,\n                onChange: e => handleIngredientChange(index, 'quantity', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"\\u0110\\u01A1n v\\u1ECB\",\n                value: ingredient.unit,\n                onChange: e => handleIngredientChange(index, 'unit', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"remove-button\",\n                onClick: () => handleRemoveIngredient(index),\n                disabled: ingredients.length === 1,\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-trash\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 19\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 17\n            }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"add-button\",\n              onClick: handleAddIngredient,\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-plus\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 17\n              }, this), \" Th\\xEAm nguy\\xEAn li\\u1EC7u\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"C\\xE1c b\\u01B0\\u1EDBc l\\xE0m\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 15\n            }, this), steps.map((step, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"step-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"step-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: [\"B\\u01B0\\u1EDBc \", index + 1]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"remove-button\",\n                  onClick: () => handleRemoveStep(index),\n                  disabled: steps.length === 1,\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-trash\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 467,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 461,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                placeholder: \"M\\xF4 t\\u1EA3 b\\u01B0\\u1EDBc th\\u1EF1c hi\\u1EC7n...\",\n                value: step.description,\n                onChange: e => handleStepChange(index, 'description', e.target.value),\n                rows: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"step-image-container\",\n                children: step.imagePreview ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"image-preview\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: step.imagePreview,\n                    alt: `Preview bước ${index + 1}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 479,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: \"remove-image\",\n                    onClick: () => {\n                      const newSteps = [...steps];\n                      newSteps[index].image = null;\n                      newSteps[index].imagePreview = null;\n                      setSteps(newSteps);\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-times\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 490,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 480,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"image-upload\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: `step-image-${index}`,\n                    className: \"upload-label\",\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-image\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 496,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Th\\xEAm h\\xECnh \\u1EA3nh cho b\\u01B0\\u1EDBc n\\xE0y\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 497,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 495,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"file\",\n                    id: `step-image-${index}`,\n                    accept: \"image/*\",\n                    onChange: e => handleStepImageChange(e, index)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 499,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 494,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 19\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 17\n            }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"add-button\",\n              onClick: handleAddStep,\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-plus\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 17\n              }, this), \" Th\\xEAm b\\u01B0\\u1EDBc\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"secondary-button\",\n              onClick: () => navigate(-1),\n              disabled: isSubmitting,\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-arrow-left\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 526,\n                columnNumber: 17\n              }, this), \" Quay l\\u1EA1i\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 15\n            }, this), !isPublished && /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"action-button publish-button\",\n              onClick: handlePublishDraft,\n              disabled: isSubmitting,\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-paper-plane\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 19\n              }, this), \" \\u0110\\u0103ng c\\xF4ng th\\u1EE9c\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"primary-button\",\n              disabled: isSubmitting,\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-save\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 545,\n                columnNumber: 17\n              }, this), \" \", isSubmitting ? 'Đang lưu...' : 'Lưu thay đổi']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 540,\n              columnNumber: 15\n            }, this), !isPublished && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"action-button delete\",\n              onClick: async () => {\n                if (window.confirm('Bạn có chắc muốn xóa bản nháp này không?')) {\n                  try {\n                    const token = localStorage.getItem('auth_token');\n                    const response = await fetch(`http://localhost:5000/api/recipes/draft/${id}`, {\n                      method: 'DELETE',\n                      headers: {\n                        'Authorization': `Bearer ${token}`\n                      }\n                    });\n                    if (!response.ok) throw new Error('Không thể xóa bản nháp');\n                    alert('Đã xóa bản nháp thành công!');\n                    navigate('/dashboard');\n                  } catch (error) {\n                    alert(error.message || 'Đã có lỗi xảy ra khi xóa bản nháp');\n                  }\n                }\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-trash\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 571,\n                columnNumber: 19\n              }, this), \" X\\xF3a b\\u1EA3n nh\\xE1p\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 519,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 7\n    }, this), isSubmitting && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: isPublished ? 'Đang cập nhật công thức...' : 'Đang lưu bản nháp...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 313,\n    columnNumber: 5\n  }, this);\n};\n_s(EditRecipePage, \"4BGR8t26EbbMEC38i6eGfb6AKG0=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = EditRecipePage;\nexport default EditRecipePage;\nvar _c;\n$RefreshReg$(_c, \"EditRecipePage\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","useNavigate","AuthContext","jsxDEV","_jsxDEV","EditRecipePage","_s","id","navigate","currentUser","isAuthenticated","title","setTitle","image","setImage","imagePreview","setImagePreview","cookingTime","setCookingTime","thoughts","setThoughts","ingredients","setIngredients","name","quantity","unit","steps","setSteps","description","loading","setLoading","error","setError","success","setSuccess","isSubmitting","setIsSubmitting","isPublished","setIsPublished","originalImageUrl","setOriginalImageUrl","alert","localStorage","setItem","fetchRecipeData","token","getItem","response","fetch","headers","status","ok","Error","data","json","recipe","author_id","cooking_time","image_url","length","formattedIngredients","map","ing","formattedSteps","step","console","message","handleAddIngredient","handleRemoveIngredient","index","newIngredients","splice","handleIngredientChange","field","value","handleAddStep","handleRemoveStep","newSteps","handleStepChange","handleStepImageChange","e","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","handleImageChange","handleSaveChanges","preventDefault","formData","FormData","append","JSON","stringify","forEach","url","method","body","errorData","setTimeout","handlePublishDraft","window","confirm","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","type","onChange","placeholder","required","src","alt","onClick","accept","min","rows","ingredient","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Lenovo/Documents/web_SE/recipe-sharing-app/src/pages/EditRecipePage.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport './CreateRecipePage.css'; // Sử dụng lại CSS từ CreateRecipePage\r\n\r\nconst EditRecipePage = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { currentUser, isAuthenticated } = useContext(AuthContext);\r\n  \r\n  // State giống như CreateRecipePage\r\n  const [title, setTitle] = useState('');\r\n  const [image, setImage] = useState(null);\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n  const [cookingTime, setCookingTime] = useState('');\r\n  const [thoughts, setThoughts] = useState('');\r\n  const [ingredients, setIngredients] = useState([{ name: '', quantity: '', unit: '' }]);\r\n  const [steps, setSteps] = useState([{ description: '', image: null, imagePreview: null }]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [isPublished, setIsPublished] = useState(false); // Biến kiểm tra là bản đã đăng hay bản nháp\r\n  const [originalImageUrl, setOriginalImageUrl] = useState('');\r\n  \r\n  useEffect(() => {\r\n    // Kiểm tra đăng nhập\r\n    if (!isAuthenticated) {\r\n      alert(\"Bạn cần đăng nhập để chỉnh sửa công thức\");\r\n      localStorage.setItem('redirectAfterLogin', `/edit-recipe/${id}`);\r\n      navigate('/login');\r\n      return;\r\n    }\r\n    \r\n    fetchRecipeData();\r\n  }, [id, isAuthenticated, navigate]);\r\n\r\n  const fetchRecipeData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n      \r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        setError(\"Bạn cần đăng nhập để chỉnh sửa công thức\");\r\n        return;\r\n      }\r\n\r\n      // Thử lấy từ API bản nháp trước\r\n      let response = await fetch(`http://localhost:5000/api/recipes/draft/${id}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      // Nếu không phải bản nháp, thử lấy từ API công thức đã đăng\r\n      if (response.status === 404) {\r\n        setIsPublished(true);\r\n        response = await fetch(`http://localhost:5000/api/recipes/${id}`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n      }\r\n      \r\n      if (!response.ok) {\r\n        if (response.status === 403) {\r\n          throw new Error(\"Bạn không có quyền chỉnh sửa công thức này\");\r\n        } else if (response.status === 404) {\r\n          throw new Error(\"Không tìm thấy công thức\");\r\n        } else {\r\n          throw new Error(\"Không thể tải thông tin công thức\");\r\n        }\r\n      }\r\n      \r\n      const data = await response.json();\r\n      const recipe = data.data;\r\n      \r\n      // Kiểm tra quyền chỉnh sửa\r\n      if (recipe.author_id !== currentUser?.id) {\r\n        throw new Error(\"Bạn không có quyền chỉnh sửa công thức này\");\r\n      }\r\n      \r\n      // Đổ dữ liệu vào form\r\n      setTitle(recipe.title || '');\r\n      setCookingTime(recipe.cooking_time || '');\r\n      setThoughts(recipe.thoughts || '');\r\n      setOriginalImageUrl(recipe.image_url || '');\r\n      setImagePreview(recipe.image_url ? `http://localhost:5000${recipe.image_url}` : null);\r\n      \r\n      // Đổ dữ liệu nguyên liệu\r\n      if (recipe.ingredients && recipe.ingredients.length > 0) {\r\n        const formattedIngredients = recipe.ingredients.map(ing => ({\r\n          name: ing.name,\r\n          quantity: ing.quantity,\r\n          unit: ing.unit\r\n        }));\r\n        setIngredients(formattedIngredients);\r\n      } else {\r\n        setIngredients([{ name: '', quantity: '', unit: '' }]);\r\n      }\r\n      \r\n      // Đổ dữ liệu các bước\r\n      if (recipe.steps && recipe.steps.length > 0) {\r\n        const formattedSteps = recipe.steps.map(step => ({\r\n          description: step.description,\r\n          image: null,\r\n          imagePreview: step.image_url ? `http://localhost:5000${step.image_url}` : null\r\n        }));\r\n        setSteps(formattedSteps);\r\n      } else {\r\n        setSteps([{ description: '', image: null, imagePreview: null }]);\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('Error fetching recipe data:', error);\r\n      setError(error.message || 'Không thể tải thông tin công thức');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Xử lý thêm nguyên liệu\r\n  const handleAddIngredient = () => {\r\n    setIngredients([...ingredients, { name: '', quantity: '', unit: '' }]);\r\n  };\r\n\r\n  // Xử lý xóa nguyên liệu\r\n  const handleRemoveIngredient = (index) => {\r\n    const newIngredients = [...ingredients];\r\n    newIngredients.splice(index, 1);\r\n    setIngredients(newIngredients);\r\n  };\r\n\r\n  // Xử lý thay đổi nguyên liệu\r\n  const handleIngredientChange = (index, field, value) => {\r\n    const newIngredients = [...ingredients];\r\n    newIngredients[index][field] = value;\r\n    setIngredients(newIngredients);\r\n  };\r\n\r\n  // Xử lý thêm bước\r\n  const handleAddStep = () => {\r\n    setSteps([...steps, { description: '', image: null, imagePreview: null }]);\r\n  };\r\n\r\n  // Xử lý xóa bước\r\n  const handleRemoveStep = (index) => {\r\n    const newSteps = [...steps];\r\n    newSteps.splice(index, 1);\r\n    setSteps(newSteps);\r\n  };\r\n\r\n  // Xử lý thay đổi bước\r\n  const handleStepChange = (index, field, value) => {\r\n    const newSteps = [...steps];\r\n    newSteps[index][field] = value;\r\n    setSteps(newSteps);\r\n  };\r\n\r\n  // Xử lý thay đổi hình ảnh bước\r\n  const handleStepImageChange = (e, index) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        const newSteps = [...steps];\r\n        newSteps[index].image = file;\r\n        newSteps[index].imagePreview = reader.result;\r\n        setSteps(newSteps);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  // Xử lý thay đổi hình ảnh chính\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setImage(file);\r\n        setImagePreview(reader.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  // Xử lý lưu thay đổi\r\n  const handleSaveChanges = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      // Validate\r\n      if (!title) {\r\n        setError('Vui lòng nhập tên món ăn');\r\n        return;\r\n      }\r\n      \r\n      setIsSubmitting(true);\r\n      \r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        setError('Bạn cần đăng nhập để lưu thay đổi');\r\n        return;\r\n      }\r\n      \r\n      const formData = new FormData();\r\n      formData.append('title', title);\r\n      formData.append('cookingTime', cookingTime || '0');\r\n      formData.append('thoughts', thoughts || '');\r\n      \r\n      // Thêm hình ảnh mới nếu có\r\n      if (image) {\r\n        formData.append('image', image);\r\n      }\r\n      \r\n      // Thêm dữ liệu nguyên liệu\r\n      formData.append('ingredients', JSON.stringify(ingredients));\r\n      \r\n      // Thêm dữ liệu các bước\r\n      formData.append('steps', JSON.stringify(steps.map(step => ({\r\n        description: step.description\r\n      }))));\r\n      \r\n      // Thêm hình ảnh cho từng bước nếu có\r\n      steps.forEach((step, index) => {\r\n        if (step.image) {\r\n          formData.append(`step_images[${index}]`, step.image);\r\n        }\r\n      });\r\n      \r\n      // Gọi API cập nhật\r\n      let url = isPublished \r\n        ? `http://localhost:5000/api/recipes/${id}` \r\n        : `http://localhost:5000/api/recipes/draft/${id}`;\r\n      \r\n      const response = await fetch(url, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: formData\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.message || 'Không thể cập nhật công thức');\r\n      }\r\n      \r\n      setSuccess(true);\r\n      alert(isPublished ? 'Đã cập nhật công thức thành công!' : 'Đã lưu bản nháp thành công!');\r\n      \r\n      // Chuyển hướng về trang chi tiết công thức nếu đã publish, hoặc về dashboard nếu là draft\r\n      setTimeout(() => {\r\n        if (isPublished) {\r\n          navigate(`/recipe/${id}`);\r\n        } else {\r\n          localStorage.setItem('activeProfileTab', 'drafts');\r\n          navigate('/dashboard');\r\n        }\r\n      }, 1000);\r\n      \r\n    } catch (error) {\r\n      console.error('Error updating recipe:', error);\r\n      setError(error.message || 'Đã có lỗi xảy ra khi cập nhật công thức');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Xử lý đăng bản nháp\r\n  const handlePublishDraft = async () => {\r\n    if (!isPublished) {\r\n      if (window.confirm('Bạn có chắc muốn đăng công thức này?')) {\r\n        try {\r\n          setIsSubmitting(true);\r\n          \r\n          const token = localStorage.getItem('token');\r\n          const response = await fetch(`http://localhost:5000/api/recipes/draft/${id}/publish`, {\r\n            method: 'POST',\r\n            headers: {\r\n              'Authorization': `Bearer ${token}`\r\n            }\r\n          });\r\n          \r\n          if (!response.ok) {\r\n            const errorData = await response.json();\r\n            throw new Error(errorData.message || 'Không thể đăng công thức');\r\n          }\r\n          \r\n          const data = await response.json();\r\n          setSuccess(true);\r\n          alert('Đã đăng công thức thành công!');\r\n          \r\n          // Chuyển hướng đến trang chi tiết công thức\r\n          setTimeout(() => {\r\n            navigate(`/recipe/${data.data.id}`);\r\n          }, 1000);\r\n          \r\n        } catch (error) {\r\n          console.error('Error publishing draft:', error);\r\n          setError(error.message || 'Đã có lỗi xảy ra khi đăng công thức');\r\n        } finally {\r\n          setIsSubmitting(false);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // Thêm form UI\r\n  return (\r\n    <div className=\"create-recipe-page\">\r\n      <div className=\"page-header\">\r\n        <div className=\"container\">\r\n          <h1>{isPublished ? 'Chỉnh sửa công thức' : 'Chỉnh sửa bản nháp'}</h1>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"container\">\r\n        <div className=\"create-recipe-container\">\r\n          {error && (\r\n            <div className=\"error-message\">\r\n              <i className=\"fas fa-exclamation-circle\"></i>\r\n              {error}\r\n            </div>\r\n          )}\r\n          \r\n          {success && (\r\n            <div className=\"success-message\">\r\n              <i className=\"fas fa-check-circle\"></i>\r\n              {isPublished \r\n                ? 'Công thức đã được cập nhật thành công!' \r\n                : 'Bản nháp đã được lưu thành công!'}\r\n            </div>\r\n          )}\r\n          \r\n          <form onSubmit={handleSaveChanges}>\r\n            {/* Tiêu đề */}\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"title\">Tên món ăn <span className=\"required\">*</span></label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"title\"\r\n                value={title}\r\n                onChange={(e) => setTitle(e.target.value)}\r\n                placeholder=\"Nhập tên món ăn\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Hình ảnh chính */}\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"image\">Hình ảnh món ăn</label>\r\n              <div className=\"image-upload-container\">\r\n                {imagePreview ? (\r\n                  <div className=\"image-preview\">\r\n                    <img src={imagePreview} alt=\"Preview\" />\r\n                    <button \r\n                      type=\"button\" \r\n                      className=\"remove-image\"\r\n                      onClick={() => {\r\n                        setImage(null);\r\n                        setImagePreview(null);\r\n                      }}\r\n                    >\r\n                      <i className=\"fas fa-times\"></i>\r\n                    </button>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"image-upload\">\r\n                    <label htmlFor=\"image-upload\" className=\"upload-label\">\r\n                      <i className=\"fas fa-cloud-upload-alt\"></i>\r\n                      <span>Tải lên hình ảnh</span>\r\n                    </label>\r\n                    <input\r\n                      type=\"file\"\r\n                      id=\"image-upload\"\r\n                      accept=\"image/*\"\r\n                      onChange={handleImageChange}\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Thời gian nấu */}\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"cookingTime\">Thời gian nấu (phút)</label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"cookingTime\"\r\n                value={cookingTime}\r\n                onChange={(e) => setCookingTime(e.target.value)}\r\n                placeholder=\"Nhập thời gian nấu\"\r\n                min=\"0\"\r\n              />\r\n            </div>\r\n\r\n            {/* Suy nghĩ của tác giả */}\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"thoughts\">Suy nghĩ của tác giả</label>\r\n              <textarea\r\n                id=\"thoughts\"\r\n                value={thoughts}\r\n                onChange={(e) => setThoughts(e.target.value)}\r\n                placeholder=\"Chia sẻ cảm nghĩ, nguồn gốc, hay câu chuyện về món ăn này...\"\r\n                rows=\"4\"\r\n              ></textarea>\r\n            </div>\r\n\r\n            {/* Nguyên liệu */}\r\n            <div className=\"form-group\">\r\n              <label>Nguyên liệu</label>\r\n              {ingredients.map((ingredient, index) => (\r\n                <div key={index} className=\"ingredient-row\">\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Tên nguyên liệu\"\r\n                    value={ingredient.name}\r\n                    onChange={(e) => handleIngredientChange(index, 'name', e.target.value)}\r\n                  />\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Số lượng\"\r\n                    value={ingredient.quantity}\r\n                    onChange={(e) => handleIngredientChange(index, 'quantity', e.target.value)}\r\n                  />\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Đơn vị\"\r\n                    value={ingredient.unit}\r\n                    onChange={(e) => handleIngredientChange(index, 'unit', e.target.value)}\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"remove-button\"\r\n                    onClick={() => handleRemoveIngredient(index)}\r\n                    disabled={ingredients.length === 1}\r\n                  >\r\n                    <i className=\"fas fa-trash\"></i>\r\n                  </button>\r\n                </div>\r\n              ))}\r\n              <button\r\n                type=\"button\"\r\n                className=\"add-button\"\r\n                onClick={handleAddIngredient}\r\n              >\r\n                <i className=\"fas fa-plus\"></i> Thêm nguyên liệu\r\n              </button>\r\n            </div>\r\n\r\n            {/* Các bước làm */}\r\n            <div className=\"form-group\">\r\n              <label>Các bước làm</label>\r\n              {steps.map((step, index) => (\r\n                <div key={index} className=\"step-container\">\r\n                  <div className=\"step-header\">\r\n                    <h3>Bước {index + 1}</h3>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"remove-button\"\r\n                      onClick={() => handleRemoveStep(index)}\r\n                      disabled={steps.length === 1}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </button>\r\n                  </div>\r\n                  <textarea\r\n                    placeholder=\"Mô tả bước thực hiện...\"\r\n                    value={step.description}\r\n                    onChange={(e) => handleStepChange(index, 'description', e.target.value)}\r\n                    rows=\"3\"\r\n                  ></textarea>\r\n                  <div className=\"step-image-container\">\r\n                    {step.imagePreview ? (\r\n                      <div className=\"image-preview\">\r\n                        <img src={step.imagePreview} alt={`Preview bước ${index + 1}`} />\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"remove-image\"\r\n                          onClick={() => {\r\n                            const newSteps = [...steps];\r\n                            newSteps[index].image = null;\r\n                            newSteps[index].imagePreview = null;\r\n                            setSteps(newSteps);\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-times\"></i>\r\n                        </button>\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"image-upload\">\r\n                        <label htmlFor={`step-image-${index}`} className=\"upload-label\">\r\n                          <i className=\"fas fa-image\"></i>\r\n                          <span>Thêm hình ảnh cho bước này</span>\r\n                        </label>\r\n                        <input\r\n                          type=\"file\"\r\n                          id={`step-image-${index}`}\r\n                          accept=\"image/*\"\r\n                          onChange={(e) => handleStepImageChange(e, index)}\r\n                        />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              <button\r\n                type=\"button\"\r\n                className=\"add-button\"\r\n                onClick={handleAddStep}\r\n              >\r\n                <i className=\"fas fa-plus\"></i> Thêm bước\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"form-actions\">\r\n              <button \r\n                type=\"button\"\r\n                className=\"secondary-button\"\r\n                onClick={() => navigate(-1)}\r\n                disabled={isSubmitting}\r\n              >\r\n                <i className=\"fas fa-arrow-left\"></i> Quay lại\r\n              </button>\r\n              \r\n              {!isPublished && (\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"action-button publish-button\"\r\n                  onClick={handlePublishDraft}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  <i className=\"fas fa-paper-plane\"></i> Đăng công thức\r\n                </button>\r\n              )}\r\n              \r\n              <button \r\n                type=\"submit\"\r\n                className=\"primary-button\"\r\n                disabled={isSubmitting}\r\n              >\r\n                <i className=\"fas fa-save\"></i> {isSubmitting ? 'Đang lưu...' : 'Lưu thay đổi'}\r\n              </button>\r\n              \r\n              {/* Nút xóa bản nháp */}\r\n              {!isPublished && (\r\n                <button\r\n                  className=\"action-button delete\"\r\n                  onClick={async () => {\r\n                    if (window.confirm('Bạn có chắc muốn xóa bản nháp này không?')) {\r\n                      try {\r\n                        const token = localStorage.getItem('auth_token');\r\n                        const response = await fetch(`http://localhost:5000/api/recipes/draft/${id}`, {\r\n                          method: 'DELETE',\r\n                          headers: {\r\n                            'Authorization': `Bearer ${token}`\r\n                          }\r\n                        });\r\n                        if (!response.ok) throw new Error('Không thể xóa bản nháp');\r\n                        alert('Đã xóa bản nháp thành công!');\r\n                        navigate('/dashboard');\r\n                      } catch (error) {\r\n                        alert(error.message || 'Đã có lỗi xảy ra khi xóa bản nháp');\r\n                      }\r\n                    }\r\n                  }}\r\n                >\r\n                  <i className=\"fas fa-trash\"></i> Xóa bản nháp\r\n                </button>\r\n              )}\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      \r\n      {isSubmitting && (\r\n        <div className=\"overlay\">\r\n          <div className=\"loading-spinner\">\r\n            <div className=\"spinner\"></div>\r\n            <p>{isPublished ? 'Đang cập nhật công thức...' : 'Đang lưu bản nháp...'}</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditRecipePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}