{"ast":null,"code":"import api from './api';\nconst authService = {\n  // Đăng nhập truyền thống\n  login: async (email, password) => {\n    try {\n      const response = await api.post('/auth/login', {\n        email,\n        password\n      });\n\n      // Lưu thông tin đăng nhập vào localStorage\n      if (response.data.token) {\n        localStorage.setItem('auth_token', response.data.token);\n        localStorage.setItem('user', JSON.stringify(response.data.user));\n      }\n      return response.data;\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      throw error.response ? error.response.data : error;\n    }\n  },\n  // Đăng ký tài khoản\n  register: async userData => {\n    try {\n      const response = await api.post('/auth/register', userData);\n      return response.data;\n    } catch (error) {\n      throw error.response ? error.response.data : error;\n    }\n  },\n  // Đăng nhập bằng Google (giữ lại nếu vẫn muốn dùng)\n  googleLogin: async tokenId => {\n    try {\n      console.log(\"Attempting to log in with token:\", tokenId ? \"Token exists\" : \"No token\");\n      const response = await api.post('/auth/google', {\n        tokenId\n      });\n      console.log(\"Login response:\", response.data);\n\n      // Lưu thông tin đăng nhập vào localStorage\n      if (response.data.token) {\n        localStorage.setItem('auth_token', response.data.token);\n        localStorage.setItem('user', JSON.stringify(response.data.user));\n      }\n      return response.data;\n    } catch (error) {\n      console.error(\"Google login error:\", error);\n      throw error.response ? error.response.data : error;\n    }\n  },\n  // Lấy thông tin người dùng hiện tại\n  getCurrentUser: async () => {\n    try {\n      const response = await api.get('/auth/me');\n      return response.data;\n    } catch (error) {\n      throw error.response ? error.response.data : error;\n    }\n  },\n  // Đăng xuất\n  logout: () => {\n    localStorage.removeItem('auth_token');\n    localStorage.removeItem('user');\n  },\n  // Kiểm tra nếu đã đăng nhập\n  isAuthenticated: () => {\n    return !!localStorage.getItem('auth_token');\n  },\n  // Lấy thông tin người dùng từ localStorage\n  getUser: () => {\n    return JSON.parse(localStorage.getItem('user'));\n  },\n  // Kiểm tra nếu là admin\n  isAdmin: () => {\n    const user = authService.getUser();\n    return user && user.role === 'admin';\n  }\n};\nexport default authService;","map":{"version":3,"names":["api","authService","login","email","password","response","post","data","token","localStorage","setItem","JSON","stringify","user","error","console","register","userData","googleLogin","tokenId","log","getCurrentUser","get","logout","removeItem","isAuthenticated","getItem","getUser","parse","isAdmin","role"],"sources":["C:/Users/Lenovo/Documents/web_SE/recipe-sharing-app/src/services/authService.js"],"sourcesContent":["import api from './api';\n\nconst authService = {\n    // Đăng nhập truyền thống\n    login: async (email, password) => {\n        try {\n            const response = await api.post('/auth/login', { email, password });\n            \n            // Lưu thông tin đăng nhập vào localStorage\n            if (response.data.token) {\n                localStorage.setItem('auth_token', response.data.token);\n                localStorage.setItem('user', JSON.stringify(response.data.user));\n            }\n            \n            return response.data;\n        } catch (error) {\n            console.error(\"Login error:\", error);\n            throw error.response ? error.response.data : error;\n        }\n    },\n    \n    // Đăng ký tài khoản\n    register: async (userData) => {\n        try {\n            const response = await api.post('/auth/register', userData);\n            return response.data;\n        } catch (error) {\n            throw error.response ? error.response.data : error;\n        }\n    },\n    \n    // Đăng nhập bằng Google (giữ lại nếu vẫn muốn dùng)\n    googleLogin: async (tokenId) => {\n        try {\n            console.log(\"Attempting to log in with token:\", tokenId ? \"Token exists\" : \"No token\");\n            const response = await api.post('/auth/google', { tokenId });\n            console.log(\"Login response:\", response.data);\n            \n            // Lưu thông tin đăng nhập vào localStorage\n            if (response.data.token) {\n                localStorage.setItem('auth_token', response.data.token);\n                localStorage.setItem('user', JSON.stringify(response.data.user));\n            }\n            \n            return response.data;\n        } catch (error) {\n            console.error(\"Google login error:\", error);\n            throw error.response ? error.response.data : error;\n        }\n    },\n\n    // Lấy thông tin người dùng hiện tại\n    getCurrentUser: async () => {\n        try {\n            const response = await api.get('/auth/me');\n            return response.data;\n        } catch (error) {\n            throw error.response ? error.response.data : error;\n        }\n    },\n    \n    // Đăng xuất\n    logout: () => {\n        localStorage.removeItem('auth_token');\n        localStorage.removeItem('user');\n    },\n\n    // Kiểm tra nếu đã đăng nhập\n    isAuthenticated: () => {\n        return !!localStorage.getItem('auth_token');\n    },\n\n    // Lấy thông tin người dùng từ localStorage\n    getUser: () => {\n        return JSON.parse(localStorage.getItem('user'));\n    },\n\n    // Kiểm tra nếu là admin\n    isAdmin: () => {\n        const user = authService.getUser();\n        return user && user.role === 'admin';\n    }\n};\n\nexport default authService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}