{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Documents\\\\web_SE\\\\recipe-sharing-app\\\\src\\\\components\\\\layout\\\\MainLayout.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext } from \"react\";\nimport { Outlet, useLocation, Link } from \"react-router-dom\"; // Thêm Link\nimport { AuthContext } from \"../../context/AuthContext\";\nimport Header from \"../common/Header.jsx\";\nimport Footer from \"../common/Footer.jsx\";\nimport \"./MainLayout.css\";\n\n// Thêm React.memo để tránh re-render không cần thiết\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MainLayout = /*#__PURE__*/_s(/*#__PURE__*/React.memo(_c = _s(({\n  children\n}) => {\n  _s();\n  const {\n    currentUser,\n    isAuthenticated\n  } = useContext(AuthContext);\n\n  // Sử dụng useLocation để xác định đường dẫn hiện tại\n  const location = useLocation();\n  const isNestedLayout = location.pathname.includes('/profile/') && document.querySelectorAll('.main-layout').length > 1;\n\n  // Vô hiệu hóa hiệu ứng cuộn (scroll) mượt làm rung header\n  React.useEffect(() => {\n    // Lưu giá trị scroll behavior hiện tại\n    const originalStyle = window.getComputedStyle(document.documentElement).scrollBehavior;\n\n    // Đặt scroll behavior thành \"auto\" để tránh animation cuộn mượt\n    document.documentElement.style.scrollBehavior = \"auto\";\n    return () => {\n      // Khôi phục giá trị ban đầu khi component unmount\n      document.documentElement.style.scrollBehavior = originalStyle;\n    };\n  }, []);\n\n  // Kiểm tra nếu đã có main-layout trong DOM, và đang ở trang profile\n  // thì không render lại header và footer\n  if (isNestedLayout) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-only-layout\",\n      children: children || /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 22\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Tạo initials từ tên người dùng\n  const getInitials = name => {\n    if (!name) return \"U\";\n    const names = name.split(\" \");\n    if (names.length > 1) {\n      return (names[0][0] + names[names.length - 1][0]).toUpperCase();\n    }\n    return name[0].toUpperCase();\n  };\n\n  // Render layout đầy đủ trong trường hợp bình thường\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-layout\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-info\",\n      children: isAuthenticated ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"username\",\n          children: (currentUser === null || currentUser === void 0 ? void 0 : currentUser.name) || \"Người dùng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"avatar\",\n          children: currentUser !== null && currentUser !== void 0 && currentUser.picture ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: currentUser.picture,\n            alt: currentUser.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            children: getInitials(currentUser === null || currentUser === void 0 ? void 0 : currentUser.name)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/login\",\n        children: \"\\u0110\\u0103ng nh\\u1EADp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main-content\",\n      children: children || /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 22\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}, \"YqiQ1pO7X1uPdcsE6OZrRV3LbbY=\", false, function () {\n  return [useLocation];\n})), \"YqiQ1pO7X1uPdcsE6OZrRV3LbbY=\", false, function () {\n  return [useLocation];\n});\n_c2 = MainLayout;\nexport default MainLayout;\nvar _c, _c2;\n$RefreshReg$(_c, \"MainLayout$React.memo\");\n$RefreshReg$(_c2, \"MainLayout\");","map":{"version":3,"names":["React","useContext","Outlet","useLocation","Link","AuthContext","Header","Footer","jsxDEV","_jsxDEV","Fragment","_Fragment","MainLayout","_s","memo","_c","children","currentUser","isAuthenticated","location","isNestedLayout","pathname","includes","document","querySelectorAll","length","useEffect","originalStyle","window","getComputedStyle","documentElement","scrollBehavior","style","className","fileName","_jsxFileName","lineNumber","columnNumber","getInitials","name","names","split","toUpperCase","picture","src","alt","to","_c2","$RefreshReg$"],"sources":["C:/Users/Lenovo/Documents/web_SE/recipe-sharing-app/src/components/layout/MainLayout.jsx"],"sourcesContent":["import React, { useContext } from \"react\";\nimport { Outlet, useLocation, Link } from \"react-router-dom\"; // Thêm Link\nimport { AuthContext } from \"../../context/AuthContext\";\nimport Header from \"../common/Header.jsx\";\nimport Footer from \"../common/Footer.jsx\";\nimport \"./MainLayout.css\";\n\n// Thêm React.memo để tránh re-render không cần thiết\nconst MainLayout = React.memo(({ children }) => {\n  const { currentUser, isAuthenticated } = useContext(AuthContext);\n\n  // Sử dụng useLocation để xác định đường dẫn hiện tại\n  const location = useLocation();\n  const isNestedLayout = location.pathname.includes('/profile/') && document.querySelectorAll('.main-layout').length > 1;\n  \n  // Vô hiệu hóa hiệu ứng cuộn (scroll) mượt làm rung header\n  React.useEffect(() => {\n    // Lưu giá trị scroll behavior hiện tại\n    const originalStyle = window.getComputedStyle(document.documentElement).scrollBehavior;\n\n    // Đặt scroll behavior thành \"auto\" để tránh animation cuộn mượt\n    document.documentElement.style.scrollBehavior = \"auto\";\n\n    return () => {\n      // Khôi phục giá trị ban đầu khi component unmount\n      document.documentElement.style.scrollBehavior = originalStyle;\n    };\n  }, []);\n\n  // Kiểm tra nếu đã có main-layout trong DOM, và đang ở trang profile\n  // thì không render lại header và footer\n  if (isNestedLayout) {\n    return (\n      <div className=\"content-only-layout\">\n        {children || <Outlet />}\n      </div>\n    );\n  }\n\n  // Tạo initials từ tên người dùng\n  const getInitials = (name) => {\n    if (!name) return \"U\";\n    \n    const names = name.split(\" \");\n    if (names.length > 1) {\n        return (names[0][0] + names[names.length - 1][0]).toUpperCase();\n    }\n    return name[0].toUpperCase();\n  };\n\n  // Render layout đầy đủ trong trường hợp bình thường\n  return (\n    <div className=\"main-layout\">\n      <Header />\n      <div className=\"user-info\">\n        {isAuthenticated ? (\n          <>\n            <span className=\"username\">{currentUser?.name || \"Người dùng\"}</span>\n            <div className=\"avatar\">\n              {currentUser?.picture ? (\n                <img src={currentUser.picture} alt={currentUser.name} />\n              ) : (\n                <span>{getInitials(currentUser?.name)}</span>\n              )}\n            </div>\n          </>\n        ) : (\n          <Link to=\"/login\">Đăng nhập</Link>\n        )}\n      </div>\n      <main className=\"main-content\">\n        {children || <Outlet />}\n      </main>\n      <Footer />\n    </div>\n  );\n});\n\nexport default MainLayout;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}