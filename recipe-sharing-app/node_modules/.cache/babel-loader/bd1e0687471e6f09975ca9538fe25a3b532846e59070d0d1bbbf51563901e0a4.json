{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Documents\\\\web_SE\\\\recipe-sharing-app\\\\src\\\\pages\\\\NotificationsPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\nimport './NotificationsPage.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst NotificationsPage = () => {\n  _s();\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const [notifications, setNotifications] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [activeTab, setActiveTab] = useState('all');\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [showReplyModal, setShowReplyModal] = useState(false);\n  const [showMessageModal, setShowMessageModal] = useState(false);\n  const [selectedNotification, setSelectedNotification] = useState(null);\n  const [replyText, setReplyText] = useState('');\n  const [adminMessage, setAdminMessage] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const navigate = useNavigate();\n  useEffect(() => {\n    fetchNotifications();\n  }, [currentUser]);\n  const fetchNotifications = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        throw new Error('Bạn cần đăng nhập để xem thông báo');\n      }\n      const response = await fetch('http://localhost:5000/api/notifications', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Không thể tải thông báo');\n      }\n      const data = await response.json();\n      setNotifications(data.data || []);\n\n      // Đếm số thông báo chưa đọc\n      const unread = data.data.filter(notification => !notification.is_read).length;\n      setUnreadCount(unread);\n    } catch (err) {\n      console.error('Error fetching notifications:', err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleMarkAsRead = async id => {\n    try {\n      const token = localStorage.getItem('token');\n      await fetch(`http://localhost:5000/api/notifications/${id}/read`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      // Cập nhật UI\n      setNotifications(notifications.map(notification => notification.id === id ? {\n        ...notification,\n        is_read: true\n      } : notification));\n\n      // Cập nhật lại số lượng thông báo chưa đọc\n      setUnreadCount(prev => Math.max(0, prev - 1));\n    } catch (err) {\n      console.error('Error marking notification as read:', err);\n    }\n  };\n  const handleMarkAllAsRead = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      await fetch('http://localhost:5000/api/notifications/markAllRead', {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      // Cập nhật UI\n      setNotifications(notifications.map(notification => ({\n        ...notification,\n        is_read: true\n      })));\n      setUnreadCount(0);\n    } catch (err) {\n      console.error('Error marking all as read:', err);\n    }\n  };\n  const handleReply = notification => {\n    setSelectedNotification(notification);\n    setReplyText('');\n    setShowReplyModal(true);\n  };\n  const handleSubmitReply = async e => {\n    e.preventDefault();\n    if (!replyText.trim()) return;\n    try {\n      setSubmitting(true);\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://localhost:5000/api/notifications/${selectedNotification.id}/reply`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          message: replyText\n        })\n      });\n      if (!response.ok) {\n        throw new Error('Không thể gửi phản hồi');\n      }\n      alert('Đã gửi phản hồi thành công');\n      setShowReplyModal(false);\n      setReplyText('');\n    } catch (err) {\n      console.error('Error sending reply:', err);\n      alert(err.message);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  const handleSendMessageToAdmin = async e => {\n    e.preventDefault();\n    if (!adminMessage.trim()) return;\n    try {\n      setSubmitting(true);\n      const token = localStorage.getItem('token');\n      const response = await fetch('http://localhost:5000/api/messages/admin', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          message: adminMessage\n        })\n      });\n      if (!response.ok) {\n        throw new Error('Không thể gửi tin nhắn');\n      }\n      alert('Đã gửi tin nhắn tới admin thành công');\n      setShowMessageModal(false);\n      setAdminMessage('');\n    } catch (err) {\n      console.error('Error sending message to admin:', err);\n      alert(err.message);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // Lọc thông báo theo tab đang chọn\n  const filteredNotifications = notifications.filter(notification => {\n    if (activeTab === 'all') return true;\n    if (activeTab === 'unread') return !notification.is_read;\n    if (activeTab === 'system') return notification.type === 'system';\n    if (activeTab === 'interaction') return ['like', 'comment', 'follow', 'save', 'share'].includes(notification.type);\n    if (activeTab === 'admin') return notification.type === 'admin';\n    return true;\n  });\n  const getNotificationIcon = type => {\n    switch (type) {\n      case 'like':\n        return 'fas fa-heart';\n      case 'comment':\n        return 'fas fa-comment';\n      case 'follow':\n        return 'fas fa-user-plus';\n      case 'save':\n        return 'fas fa-bookmark';\n      case 'share':\n        return 'fas fa-share-alt';\n      case 'admin':\n        return 'fas fa-shield-alt';\n      case 'system':\n        return 'fas fa-bell';\n      default:\n        return 'fas fa-bell';\n    }\n  };\n  const getNotificationLink = notification => {\n    if (notification.type === 'like' || notification.type === 'comment' || notification.type === 'reply' || notification.type === 'new_post' // Thêm dòng này\n    ) {\n      let url = `/recipe/${notification.related_recipe_id || ''}`;\n      if (notification.related_comment_id) url += `?comment=${notification.related_comment_id}`;\n      return url;\n    }\n    if (notification.type === 'follow') {\n      return `/profile/${notification.sender_id}`;\n    }\n    return '#';\n  };\n  const getNotificationText = notification => {\n    var _notification$content;\n    switch (notification.type) {\n      case 'new_post':\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: notification.sender_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this), \" v\\u1EEBa \\u0111\\u0103ng b\\xE0i \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: ((_notification$content = notification.content.match(/\"(.+)\"/)) === null || _notification$content === void 0 ? void 0 : _notification$content[1]) || ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 70\n          }, this)]\n        }, void 0, true);\n      case 'like':\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: notification.sender_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this), \" \\u0111\\xE3 th\\xEDch c\\xF4ng th\\u1EE9c \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: notification.recipe_title || ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 76\n          }, this), \" c\\u1EE7a b\\u1EA1n\"]\n        }, void 0, true);\n      case 'comment':\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: notification.sender_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), \" \\u0111\\xE3 b\\xECnh lu\\u1EADn v\\u1EC1 c\\xF4ng th\\u1EE9c \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: notification.recipe_title || ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 83\n          }, this), \" c\\u1EE7a b\\u1EA1n\"]\n        }, void 0, true);\n      case 'reply':\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: notification.sender_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this), \" \\u0111\\xE3 tr\\u1EA3 l\\u1EDDi b\\xECnh lu\\u1EADn c\\u1EE7a b\\u1EA1n\"]\n        }, void 0, true);\n      case 'follow':\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: notification.sender_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), \" \\u0111\\xE3 theo d\\xF5i b\\u1EA1n\"]\n        }, void 0, true);\n      case 'admin':\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Admin:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this), \" \", notification.content]\n        }, void 0, true);\n      default:\n        return notification.content;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"notifications-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Th\\xF4ng b\\xE1o\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-actions\",\n        children: [unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"mark-all-read-btn\",\n          onClick: handleMarkAllAsRead,\n          children: \"\\u0110\\xE1nh d\\u1EA5u t\\u1EA5t c\\u1EA3 l\\xE0 \\u0111\\xE3 \\u0111\\u1ECDc\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"message-admin-btn\",\n          onClick: () => setShowMessageModal(true),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-paper-plane\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this), \" G\\u1EEDi tin nh\\u1EAFn \\u0111\\u1EBFn Admin\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notifications-tabs\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-btn ${activeTab === 'all' ? 'active' : ''}`,\n        onClick: () => setActiveTab('all'),\n        children: \"T\\u1EA5t c\\u1EA3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-btn ${activeTab === 'unread' ? 'active' : ''}`,\n        onClick: () => setActiveTab('unread'),\n        children: [\"Ch\\u01B0a \\u0111\\u1ECDc \", unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"badge\",\n          children: unreadCount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 40\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-btn ${activeTab === 'interaction' ? 'active' : ''}`,\n        onClick: () => setActiveTab('interaction'),\n        children: \"T\\u01B0\\u01A1ng t\\xE1c\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-btn ${activeTab === 'admin' ? 'active' : ''}`,\n        onClick: () => setActiveTab('admin'),\n        children: \"Admin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-btn ${activeTab === 'system' ? 'active' : ''}`,\n        onClick: () => setActiveTab('system'),\n        children: \"H\\u1EC7 th\\u1ED1ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notifications-list\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0110ang t\\u1EA3i th\\xF4ng b\\xE1o...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-exclamation-circle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 11\n      }, this) : filteredNotifications.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty-state\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-bell-slash\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Kh\\xF4ng c\\xF3 th\\xF4ng b\\xE1o n\\xE0o trong m\\u1EE5c n\\xE0y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 11\n      }, this) : filteredNotifications.map(notification => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `notification-item ${!notification.is_read ? 'unread' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notification-icon\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: getNotificationIcon(notification.type)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notification-content\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: getNotificationLink(notification),\n            className: \"notification-text\",\n            style: {\n              textDecoration: 'none',\n              color: 'inherit',\n              cursor: 'pointer'\n            },\n            onClick: () => handleMarkAsRead(notification.id),\n            children: getNotificationText(notification)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 15\n        }, this)]\n      }, notification.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 7\n    }, this), showReplyModal && selectedNotification && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Ph\\u1EA3n h\\u1ED3i \\u0111\\u1EBFn Admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-btn\",\n            onClick: () => setShowReplyModal(false),\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-times\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"original-message\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Admin:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 20\n              }, this), \" \", selectedNotification.message]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"message-time\",\n              children: new Date(selectedNotification.created_at).toLocaleString('vi-VN')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmitReply,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"N\\u1ED9i dung ph\\u1EA3n h\\u1ED3i:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: replyText,\n                onChange: e => setReplyText(e.target.value),\n                placeholder: \"Nh\\u1EADp ph\\u1EA3n h\\u1ED3i c\\u1EE7a b\\u1EA1n...\",\n                rows: \"4\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-footer\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"cancel-btn\",\n                onClick: () => setShowReplyModal(false),\n                disabled: submitting,\n                children: \"Hu\\u1EF7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"submit-btn\",\n                disabled: submitting || !replyText.trim(),\n                children: submitting ? 'Đang gửi...' : 'Gửi phản hồi'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 9\n    }, this), showMessageModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"G\\u1EEDi tin nh\\u1EAFn t\\u1EDBi Admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-btn\",\n            onClick: () => setShowMessageModal(false),\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-times\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSendMessageToAdmin,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"N\\u1ED9i dung tin nh\\u1EAFn:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: adminMessage,\n                onChange: e => setAdminMessage(e.target.value),\n                placeholder: \"Nh\\u1EADp n\\u1ED9i dung tin nh\\u1EAFn c\\u1EE7a b\\u1EA1n...\",\n                rows: \"5\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-footer\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"cancel-btn\",\n                onClick: () => setShowMessageModal(false),\n                disabled: submitting,\n                children: \"Hu\\u1EF7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 427,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"submit-btn\",\n                disabled: submitting || !adminMessage.trim(),\n                children: submitting ? 'Đang gửi...' : 'Gửi tin nhắn'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 254,\n    columnNumber: 5\n  }, this);\n};\n_s(NotificationsPage, \"p+LLKbF1E1wcNSXtRJyCJiAvFGE=\", false, function () {\n  return [useNavigate];\n});\n_c = NotificationsPage;\nexport default NotificationsPage;\nvar _c;\n$RefreshReg$(_c, \"NotificationsPage\");","map":{"version":3,"names":["React","useState","useEffect","useContext","Link","useNavigate","AuthContext","jsxDEV","_jsxDEV","Fragment","_Fragment","NotificationsPage","_s","currentUser","notifications","setNotifications","loading","setLoading","error","setError","activeTab","setActiveTab","unreadCount","setUnreadCount","showReplyModal","setShowReplyModal","showMessageModal","setShowMessageModal","selectedNotification","setSelectedNotification","replyText","setReplyText","adminMessage","setAdminMessage","submitting","setSubmitting","navigate","fetchNotifications","token","localStorage","getItem","Error","response","fetch","headers","ok","data","json","unread","filter","notification","is_read","length","err","console","message","handleMarkAsRead","id","method","map","prev","Math","max","handleMarkAllAsRead","handleReply","handleSubmitReply","e","preventDefault","trim","body","JSON","stringify","alert","handleSendMessageToAdmin","filteredNotifications","type","includes","getNotificationIcon","getNotificationLink","url","related_recipe_id","related_comment_id","sender_id","getNotificationText","_notification$content","children","sender_name","fileName","_jsxFileName","lineNumber","columnNumber","content","match","recipe_title","className","onClick","to","style","textDecoration","color","cursor","Date","created_at","toLocaleString","onSubmit","value","onChange","target","placeholder","rows","required","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Lenovo/Documents/web_SE/recipe-sharing-app/src/pages/NotificationsPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport './NotificationsPage.css';\r\n\r\nconst NotificationsPage = () => {\r\n  const { currentUser } = useContext(AuthContext);\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [activeTab, setActiveTab] = useState('all');\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [showReplyModal, setShowReplyModal] = useState(false);\r\n  const [showMessageModal, setShowMessageModal] = useState(false);\r\n  const [selectedNotification, setSelectedNotification] = useState(null);\r\n  const [replyText, setReplyText] = useState('');\r\n  const [adminMessage, setAdminMessage] = useState('');\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const navigate = useNavigate();\r\n  \r\n  useEffect(() => {\r\n    fetchNotifications();\r\n  }, [currentUser]);\r\n  \r\n  const fetchNotifications = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        throw new Error('Bạn cần đăng nhập để xem thông báo');\r\n      }\r\n      \r\n      const response = await fetch('http://localhost:5000/api/notifications', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('Không thể tải thông báo');\r\n      }\r\n      \r\n      const data = await response.json();\r\n      setNotifications(data.data || []);\r\n      \r\n      // Đếm số thông báo chưa đọc\r\n      const unread = data.data.filter(notification => !notification.is_read).length;\r\n      setUnreadCount(unread);\r\n      \r\n    } catch (err) {\r\n      console.error('Error fetching notifications:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  const handleMarkAsRead = async (id) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await fetch(`http://localhost:5000/api/notifications/${id}/read`, {\r\n        method: 'PUT',\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      \r\n      // Cập nhật UI\r\n      setNotifications(notifications.map(notification => \r\n        notification.id === id \r\n          ? { ...notification, is_read: true } \r\n          : notification\r\n      ));\r\n      \r\n      // Cập nhật lại số lượng thông báo chưa đọc\r\n      setUnreadCount(prev => Math.max(0, prev - 1));\r\n      \r\n    } catch (err) {\r\n      console.error('Error marking notification as read:', err);\r\n    }\r\n  };\r\n  \r\n  const handleMarkAllAsRead = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await fetch('http://localhost:5000/api/notifications/markAllRead', {\r\n        method: 'PUT',\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      \r\n      // Cập nhật UI\r\n      setNotifications(notifications.map(notification => ({ ...notification, is_read: true })));\r\n      setUnreadCount(0);\r\n      \r\n    } catch (err) {\r\n      console.error('Error marking all as read:', err);\r\n    }\r\n  };\r\n  \r\n  const handleReply = (notification) => {\r\n    setSelectedNotification(notification);\r\n    setReplyText('');\r\n    setShowReplyModal(true);\r\n  };\r\n  \r\n  const handleSubmitReply = async (e) => {\r\n    e.preventDefault();\r\n    if (!replyText.trim()) return;\r\n    \r\n    try {\r\n      setSubmitting(true);\r\n      const token = localStorage.getItem('token');\r\n      \r\n      const response = await fetch(`http://localhost:5000/api/notifications/${selectedNotification.id}/reply`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ message: replyText })\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('Không thể gửi phản hồi');\r\n      }\r\n      \r\n      alert('Đã gửi phản hồi thành công');\r\n      setShowReplyModal(false);\r\n      setReplyText('');\r\n      \r\n    } catch (err) {\r\n      console.error('Error sending reply:', err);\r\n      alert(err.message);\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n  \r\n  const handleSendMessageToAdmin = async (e) => {\r\n    e.preventDefault();\r\n    if (!adminMessage.trim()) return;\r\n    \r\n    try {\r\n      setSubmitting(true);\r\n      const token = localStorage.getItem('token');\r\n      \r\n      const response = await fetch('http://localhost:5000/api/messages/admin', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ message: adminMessage })\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('Không thể gửi tin nhắn');\r\n      }\r\n      \r\n      alert('Đã gửi tin nhắn tới admin thành công');\r\n      setShowMessageModal(false);\r\n      setAdminMessage('');\r\n      \r\n    } catch (err) {\r\n      console.error('Error sending message to admin:', err);\r\n      alert(err.message);\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n  \r\n  // Lọc thông báo theo tab đang chọn\r\n  const filteredNotifications = notifications.filter(notification => {\r\n    if (activeTab === 'all') return true;\r\n    if (activeTab === 'unread') return !notification.is_read;\r\n    if (activeTab === 'system') return notification.type === 'system';\r\n    if (activeTab === 'interaction') return ['like', 'comment', 'follow', 'save', 'share'].includes(notification.type);\r\n    if (activeTab === 'admin') return notification.type === 'admin';\r\n    return true;\r\n  });\r\n  \r\n  const getNotificationIcon = (type) => {\r\n    switch (type) {\r\n      case 'like': return 'fas fa-heart';\r\n      case 'comment': return 'fas fa-comment';\r\n      case 'follow': return 'fas fa-user-plus';\r\n      case 'save': return 'fas fa-bookmark';\r\n      case 'share': return 'fas fa-share-alt';\r\n      case 'admin': return 'fas fa-shield-alt';\r\n      case 'system': return 'fas fa-bell';\r\n      default: return 'fas fa-bell';\r\n    }\r\n  };\r\n  \r\n  const getNotificationLink = (notification) => {\r\n    if (\r\n      notification.type === 'like' ||\r\n      notification.type === 'comment' ||\r\n      notification.type === 'reply' ||\r\n      notification.type === 'new_post' // Thêm dòng này\r\n    ) {\r\n      let url = `/recipe/${notification.related_recipe_id || ''}`;\r\n      if (notification.related_comment_id) url += `?comment=${notification.related_comment_id}`;\r\n      return url;\r\n    }\r\n    if (notification.type === 'follow') {\r\n      return `/profile/${notification.sender_id}`;\r\n    }\r\n    return '#';\r\n  };\r\n\r\n  const getNotificationText = (notification) => {\r\n    switch (notification.type) {\r\n      case 'new_post':\r\n        return (\r\n          <>\r\n            <strong>{notification.sender_name}</strong> vừa đăng bài <strong>{notification.content.match(/\"(.+)\"/)?.[1] || ''}</strong>\r\n          </>\r\n        );\r\n      case 'like':\r\n        return (\r\n          <>\r\n            <strong>{notification.sender_name}</strong> đã thích công thức <strong>{notification.recipe_title || ''}</strong> của bạn\r\n          </>\r\n        );\r\n      case 'comment':\r\n        return (\r\n          <>\r\n            <strong>{notification.sender_name}</strong> đã bình luận về công thức <strong>{notification.recipe_title || ''}</strong> của bạn\r\n          </>\r\n        );\r\n      case 'reply':\r\n        return (\r\n          <>\r\n            <strong>{notification.sender_name}</strong> đã trả lời bình luận của bạn\r\n          </>\r\n        );\r\n      case 'follow':\r\n        return (\r\n          <>\r\n            <strong>{notification.sender_name}</strong> đã theo dõi bạn\r\n          </>\r\n        );\r\n      case 'admin':\r\n        return (\r\n          <>\r\n            <strong>Admin:</strong> {notification.content}\r\n          </>\r\n        );\r\n      default:\r\n        return notification.content;\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"notifications-page\">\r\n      <div className=\"page-header\">\r\n        <h1>Thông báo</h1>\r\n        <div className=\"header-actions\">\r\n          {unreadCount > 0 && (\r\n            <button \r\n              className=\"mark-all-read-btn\" \r\n              onClick={handleMarkAllAsRead}\r\n            >\r\n              Đánh dấu tất cả là đã đọc\r\n            </button>\r\n          )}\r\n          <button \r\n            className=\"message-admin-btn\"\r\n            onClick={() => setShowMessageModal(true)}\r\n          >\r\n            <i className=\"fas fa-paper-plane\"></i> Gửi tin nhắn đến Admin\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"notifications-tabs\">\r\n        <button \r\n          className={`tab-btn ${activeTab === 'all' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('all')}\r\n        >\r\n          Tất cả\r\n        </button>\r\n        <button \r\n          className={`tab-btn ${activeTab === 'unread' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('unread')}\r\n        >\r\n          Chưa đọc {unreadCount > 0 && <span className=\"badge\">{unreadCount}</span>}\r\n        </button>\r\n        <button \r\n          className={`tab-btn ${activeTab === 'interaction' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('interaction')}\r\n        >\r\n          Tương tác\r\n        </button>\r\n        <button \r\n          className={`tab-btn ${activeTab === 'admin' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('admin')}\r\n        >\r\n          Admin\r\n        </button>\r\n        <button \r\n          className={`tab-btn ${activeTab === 'system' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('system')}\r\n        >\r\n          Hệ thống\r\n        </button>\r\n      </div>\r\n      \r\n      <div className=\"notifications-list\">\r\n        {loading ? (\r\n          <div className=\"loading-container\">\r\n            <div className=\"spinner\"></div>\r\n            <p>Đang tải thông báo...</p>\r\n          </div>\r\n        ) : error ? (\r\n          <div className=\"error-message\">\r\n            <i className=\"fas fa-exclamation-circle\"></i>\r\n            <p>{error}</p>\r\n          </div>\r\n        ) : filteredNotifications.length === 0 ? (\r\n          <div className=\"empty-state\">\r\n            <i className=\"fas fa-bell-slash\"></i>\r\n            <p>Không có thông báo nào trong mục này</p>\r\n          </div>\r\n        ) : (\r\n          filteredNotifications.map(notification => (\r\n            <div \r\n              key={notification.id}\r\n              className={`notification-item ${!notification.is_read ? 'unread' : ''}`}\r\n            >\r\n              <div className=\"notification-icon\">\r\n                <i className={getNotificationIcon(notification.type)}></i>\r\n              </div>\r\n              <div className=\"notification-content\">\r\n                <Link\r\n                  to={getNotificationLink(notification)}\r\n                  className=\"notification-text\"\r\n                  style={{ textDecoration: 'none', color: 'inherit', cursor: 'pointer' }}\r\n                  onClick={() => handleMarkAsRead(notification.id)}\r\n                >\r\n                  {getNotificationText(notification)}\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n      \r\n      {/* Modal phản hồi */}\r\n      {showReplyModal && selectedNotification && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"modal\">\r\n            <div className=\"modal-header\">\r\n              <h3>Phản hồi đến Admin</h3>\r\n              <button className=\"close-btn\" onClick={() => setShowReplyModal(false)}>\r\n                <i className=\"fas fa-times\"></i>\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"modal-body\">\r\n              <div className=\"original-message\">\r\n                <p><strong>Admin:</strong> {selectedNotification.message}</p>\r\n                <span className=\"message-time\">\r\n                  {new Date(selectedNotification.created_at).toLocaleString('vi-VN')}\r\n                </span>\r\n              </div>\r\n              \r\n              <form onSubmit={handleSubmitReply}>\r\n                <div className=\"form-group\">\r\n                  <label>Nội dung phản hồi:</label>\r\n                  <textarea\r\n                    value={replyText}\r\n                    onChange={(e) => setReplyText(e.target.value)}\r\n                    placeholder=\"Nhập phản hồi của bạn...\"\r\n                    rows=\"4\"\r\n                    required\r\n                  ></textarea>\r\n                </div>\r\n                \r\n                <div className=\"modal-footer\">\r\n                  <button \r\n                    type=\"button\" \r\n                    className=\"cancel-btn\"\r\n                    onClick={() => setShowReplyModal(false)}\r\n                    disabled={submitting}\r\n                  >\r\n                    Huỷ\r\n                  </button>\r\n                  <button \r\n                    type=\"submit\"\r\n                    className=\"submit-btn\"\r\n                    disabled={submitting || !replyText.trim()}\r\n                  >\r\n                    {submitting ? 'Đang gửi...' : 'Gửi phản hồi'}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Modal gửi tin nhắn đến Admin */}\r\n      {showMessageModal && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"modal\">\r\n            <div className=\"modal-header\">\r\n              <h3>Gửi tin nhắn tới Admin</h3>\r\n              <button className=\"close-btn\" onClick={() => setShowMessageModal(false)}>\r\n                <i className=\"fas fa-times\"></i>\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"modal-body\">\r\n              <form onSubmit={handleSendMessageToAdmin}>\r\n                <div className=\"form-group\">\r\n                  <label>Nội dung tin nhắn:</label>\r\n                  <textarea\r\n                    value={adminMessage}\r\n                    onChange={(e) => setAdminMessage(e.target.value)}\r\n                    placeholder=\"Nhập nội dung tin nhắn của bạn...\"\r\n                    rows=\"5\"\r\n                    required\r\n                  ></textarea>\r\n                </div>\r\n                \r\n                <div className=\"modal-footer\">\r\n                  <button \r\n                    type=\"button\" \r\n                    className=\"cancel-btn\"\r\n                    onClick={() => setShowMessageModal(false)}\r\n                    disabled={submitting}\r\n                  >\r\n                    Huỷ\r\n                  </button>\r\n                  <button \r\n                    type=\"submit\"\r\n                    className=\"submit-btn\"\r\n                    disabled={submitting || !adminMessage.trim()}\r\n                  >\r\n                    {submitting ? 'Đang gửi...' : 'Gửi tin nhắn'}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationsPage;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAC9D,SAASC,IAAI,EAAEC,WAAW,QAAQ,kBAAkB;AACpD,SAASC,WAAW,QAAQ,wBAAwB;AACpD,OAAO,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEjC,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC9B,MAAM;IAAEC;EAAY,CAAC,GAAGV,UAAU,CAACG,WAAW,CAAC;EAC/C,MAAM,CAACQ,aAAa,EAAEC,gBAAgB,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACe,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACiB,KAAK,EAAEC,QAAQ,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACmB,SAAS,EAAEC,YAAY,CAAC,GAAGpB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACqB,WAAW,EAAEC,cAAc,CAAC,GAAGtB,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACuB,cAAc,EAAEC,iBAAiB,CAAC,GAAGxB,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAACyB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG1B,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAM,CAAC2B,oBAAoB,EAAEC,uBAAuB,CAAC,GAAG5B,QAAQ,CAAC,IAAI,CAAC;EACtE,MAAM,CAAC6B,SAAS,EAAEC,YAAY,CAAC,GAAG9B,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAAC+B,YAAY,EAAEC,eAAe,CAAC,GAAGhC,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACiC,UAAU,EAAEC,aAAa,CAAC,GAAGlC,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAMmC,QAAQ,GAAG/B,WAAW,CAAC,CAAC;EAE9BH,SAAS,CAAC,MAAM;IACdmC,kBAAkB,CAAC,CAAC;EACtB,CAAC,EAAE,CAACxB,WAAW,CAAC,CAAC;EAEjB,MAAMwB,kBAAkB,GAAG,MAAAA,CAAA,KAAY;IACrC,IAAI;MACFpB,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;MAEd,MAAMmB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAI,CAACF,KAAK,EAAE;QACV,MAAM,IAAIG,KAAK,CAAC,oCAAoC,CAAC;MACvD;MAEA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,yCAAyC,EAAE;QACtEC,OAAO,EAAE;UAAE,eAAe,EAAE,UAAUN,KAAK;QAAG;MAChD,CAAC,CAAC;MAEF,IAAI,CAACI,QAAQ,CAACG,EAAE,EAAE;QAChB,MAAM,IAAIJ,KAAK,CAAC,yBAAyB,CAAC;MAC5C;MAEA,MAAMK,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MAClChC,gBAAgB,CAAC+B,IAAI,CAACA,IAAI,IAAI,EAAE,CAAC;;MAEjC;MACA,MAAME,MAAM,GAAGF,IAAI,CAACA,IAAI,CAACG,MAAM,CAACC,YAAY,IAAI,CAACA,YAAY,CAACC,OAAO,CAAC,CAACC,MAAM;MAC7E7B,cAAc,CAACyB,MAAM,CAAC;IAExB,CAAC,CAAC,OAAOK,GAAG,EAAE;MACZC,OAAO,CAACpC,KAAK,CAAC,+BAA+B,EAAEmC,GAAG,CAAC;MACnDlC,QAAQ,CAACkC,GAAG,CAACE,OAAO,CAAC;IACvB,CAAC,SAAS;MACRtC,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMuC,gBAAgB,GAAG,MAAOC,EAAE,IAAK;IACrC,IAAI;MACF,MAAMnB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,MAAMG,KAAK,CAAC,2CAA2Cc,EAAE,OAAO,EAAE;QAChEC,MAAM,EAAE,KAAK;QACbd,OAAO,EAAE;UAAE,eAAe,EAAE,UAAUN,KAAK;QAAG;MAChD,CAAC,CAAC;;MAEF;MACAvB,gBAAgB,CAACD,aAAa,CAAC6C,GAAG,CAACT,YAAY,IAC7CA,YAAY,CAACO,EAAE,KAAKA,EAAE,GAClB;QAAE,GAAGP,YAAY;QAAEC,OAAO,EAAE;MAAK,CAAC,GAClCD,YACN,CAAC,CAAC;;MAEF;MACA3B,cAAc,CAACqC,IAAI,IAAIC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEF,IAAI,GAAG,CAAC,CAAC,CAAC;IAE/C,CAAC,CAAC,OAAOP,GAAG,EAAE;MACZC,OAAO,CAACpC,KAAK,CAAC,qCAAqC,EAAEmC,GAAG,CAAC;IAC3D;EACF,CAAC;EAED,MAAMU,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACtC,IAAI;MACF,MAAMzB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,MAAMG,KAAK,CAAC,qDAAqD,EAAE;QACjEe,MAAM,EAAE,KAAK;QACbd,OAAO,EAAE;UAAE,eAAe,EAAE,UAAUN,KAAK;QAAG;MAChD,CAAC,CAAC;;MAEF;MACAvB,gBAAgB,CAACD,aAAa,CAAC6C,GAAG,CAACT,YAAY,KAAK;QAAE,GAAGA,YAAY;QAAEC,OAAO,EAAE;MAAK,CAAC,CAAC,CAAC,CAAC;MACzF5B,cAAc,CAAC,CAAC,CAAC;IAEnB,CAAC,CAAC,OAAO8B,GAAG,EAAE;MACZC,OAAO,CAACpC,KAAK,CAAC,4BAA4B,EAAEmC,GAAG,CAAC;IAClD;EACF,CAAC;EAED,MAAMW,WAAW,GAAId,YAAY,IAAK;IACpCrB,uBAAuB,CAACqB,YAAY,CAAC;IACrCnB,YAAY,CAAC,EAAE,CAAC;IAChBN,iBAAiB,CAAC,IAAI,CAAC;EACzB,CAAC;EAED,MAAMwC,iBAAiB,GAAG,MAAOC,CAAC,IAAK;IACrCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI,CAACrC,SAAS,CAACsC,IAAI,CAAC,CAAC,EAAE;IAEvB,IAAI;MACFjC,aAAa,CAAC,IAAI,CAAC;MACnB,MAAMG,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAE3C,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAAC,2CAA2Cf,oBAAoB,CAAC6B,EAAE,QAAQ,EAAE;QACvGC,MAAM,EAAE,MAAM;QACdd,OAAO,EAAE;UACP,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAE,UAAUN,KAAK;QAClC,CAAC;QACD+B,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEhB,OAAO,EAAEzB;QAAU,CAAC;MAC7C,CAAC,CAAC;MAEF,IAAI,CAACY,QAAQ,CAACG,EAAE,EAAE;QAChB,MAAM,IAAIJ,KAAK,CAAC,wBAAwB,CAAC;MAC3C;MAEA+B,KAAK,CAAC,4BAA4B,CAAC;MACnC/C,iBAAiB,CAAC,KAAK,CAAC;MACxBM,YAAY,CAAC,EAAE,CAAC;IAElB,CAAC,CAAC,OAAOsB,GAAG,EAAE;MACZC,OAAO,CAACpC,KAAK,CAAC,sBAAsB,EAAEmC,GAAG,CAAC;MAC1CmB,KAAK,CAACnB,GAAG,CAACE,OAAO,CAAC;IACpB,CAAC,SAAS;MACRpB,aAAa,CAAC,KAAK,CAAC;IACtB;EACF,CAAC;EAED,MAAMsC,wBAAwB,GAAG,MAAOP,CAAC,IAAK;IAC5CA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI,CAACnC,YAAY,CAACoC,IAAI,CAAC,CAAC,EAAE;IAE1B,IAAI;MACFjC,aAAa,CAAC,IAAI,CAAC;MACnB,MAAMG,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAE3C,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAAC,0CAA0C,EAAE;QACvEe,MAAM,EAAE,MAAM;QACdd,OAAO,EAAE;UACP,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAE,UAAUN,KAAK;QAClC,CAAC;QACD+B,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEhB,OAAO,EAAEvB;QAAa,CAAC;MAChD,CAAC,CAAC;MAEF,IAAI,CAACU,QAAQ,CAACG,EAAE,EAAE;QAChB,MAAM,IAAIJ,KAAK,CAAC,wBAAwB,CAAC;MAC3C;MAEA+B,KAAK,CAAC,sCAAsC,CAAC;MAC7C7C,mBAAmB,CAAC,KAAK,CAAC;MAC1BM,eAAe,CAAC,EAAE,CAAC;IAErB,CAAC,CAAC,OAAOoB,GAAG,EAAE;MACZC,OAAO,CAACpC,KAAK,CAAC,iCAAiC,EAAEmC,GAAG,CAAC;MACrDmB,KAAK,CAACnB,GAAG,CAACE,OAAO,CAAC;IACpB,CAAC,SAAS;MACRpB,aAAa,CAAC,KAAK,CAAC;IACtB;EACF,CAAC;;EAED;EACA,MAAMuC,qBAAqB,GAAG5D,aAAa,CAACmC,MAAM,CAACC,YAAY,IAAI;IACjE,IAAI9B,SAAS,KAAK,KAAK,EAAE,OAAO,IAAI;IACpC,IAAIA,SAAS,KAAK,QAAQ,EAAE,OAAO,CAAC8B,YAAY,CAACC,OAAO;IACxD,IAAI/B,SAAS,KAAK,QAAQ,EAAE,OAAO8B,YAAY,CAACyB,IAAI,KAAK,QAAQ;IACjE,IAAIvD,SAAS,KAAK,aAAa,EAAE,OAAO,CAAC,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,CAACwD,QAAQ,CAAC1B,YAAY,CAACyB,IAAI,CAAC;IAClH,IAAIvD,SAAS,KAAK,OAAO,EAAE,OAAO8B,YAAY,CAACyB,IAAI,KAAK,OAAO;IAC/D,OAAO,IAAI;EACb,CAAC,CAAC;EAEF,MAAME,mBAAmB,GAAIF,IAAI,IAAK;IACpC,QAAQA,IAAI;MACV,KAAK,MAAM;QAAE,OAAO,cAAc;MAClC,KAAK,SAAS;QAAE,OAAO,gBAAgB;MACvC,KAAK,QAAQ;QAAE,OAAO,kBAAkB;MACxC,KAAK,MAAM;QAAE,OAAO,iBAAiB;MACrC,KAAK,OAAO;QAAE,OAAO,kBAAkB;MACvC,KAAK,OAAO;QAAE,OAAO,mBAAmB;MACxC,KAAK,QAAQ;QAAE,OAAO,aAAa;MACnC;QAAS,OAAO,aAAa;IAC/B;EACF,CAAC;EAED,MAAMG,mBAAmB,GAAI5B,YAAY,IAAK;IAC5C,IACEA,YAAY,CAACyB,IAAI,KAAK,MAAM,IAC5BzB,YAAY,CAACyB,IAAI,KAAK,SAAS,IAC/BzB,YAAY,CAACyB,IAAI,KAAK,OAAO,IAC7BzB,YAAY,CAACyB,IAAI,KAAK,UAAU,CAAC;IAAA,EACjC;MACA,IAAII,GAAG,GAAG,WAAW7B,YAAY,CAAC8B,iBAAiB,IAAI,EAAE,EAAE;MAC3D,IAAI9B,YAAY,CAAC+B,kBAAkB,EAAEF,GAAG,IAAI,YAAY7B,YAAY,CAAC+B,kBAAkB,EAAE;MACzF,OAAOF,GAAG;IACZ;IACA,IAAI7B,YAAY,CAACyB,IAAI,KAAK,QAAQ,EAAE;MAClC,OAAO,YAAYzB,YAAY,CAACgC,SAAS,EAAE;IAC7C;IACA,OAAO,GAAG;EACZ,CAAC;EAED,MAAMC,mBAAmB,GAAIjC,YAAY,IAAK;IAAA,IAAAkC,qBAAA;IAC5C,QAAQlC,YAAY,CAACyB,IAAI;MACvB,KAAK,UAAU;QACb,oBACEnE,OAAA,CAAAE,SAAA;UAAA2E,QAAA,gBACE7E,OAAA;YAAA6E,QAAA,EAASnC,YAAY,CAACoC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC,oCAAc,eAAAlF,OAAA;YAAA6E,QAAA,EAAS,EAAAD,qBAAA,GAAAlC,YAAY,CAACyC,OAAO,CAACC,KAAK,CAAC,QAAQ,CAAC,cAAAR,qBAAA,uBAApCA,qBAAA,CAAuC,CAAC,CAAC,KAAI;UAAE;YAAAG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC;QAAA,eAC3H,CAAC;MAEP,KAAK,MAAM;QACT,oBACElF,OAAA,CAAAE,SAAA;UAAA2E,QAAA,gBACE7E,OAAA;YAAA6E,QAAA,EAASnC,YAAY,CAACoC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC,2CAAoB,eAAAlF,OAAA;YAAA6E,QAAA,EAASnC,YAAY,CAAC2C,YAAY,IAAI;UAAE;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC,sBACnH;QAAA,eAAE,CAAC;MAEP,KAAK,SAAS;QACZ,oBACElF,OAAA,CAAAE,SAAA;UAAA2E,QAAA,gBACE7E,OAAA;YAAA6E,QAAA,EAASnC,YAAY,CAACoC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC,4DAA2B,eAAAlF,OAAA;YAAA6E,QAAA,EAASnC,YAAY,CAAC2C,YAAY,IAAI;UAAE;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC,sBAC1H;QAAA,eAAE,CAAC;MAEP,KAAK,OAAO;QACV,oBACElF,OAAA,CAAAE,SAAA;UAAA2E,QAAA,gBACE7E,OAAA;YAAA6E,QAAA,EAASnC,YAAY,CAACoC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC,qEAC7C;QAAA,eAAE,CAAC;MAEP,KAAK,QAAQ;QACX,oBACElF,OAAA,CAAAE,SAAA;UAAA2E,QAAA,gBACE7E,OAAA;YAAA6E,QAAA,EAASnC,YAAY,CAACoC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC,oCAC7C;QAAA,eAAE,CAAC;MAEP,KAAK,OAAO;QACV,oBACElF,OAAA,CAAAE,SAAA;UAAA2E,QAAA,gBACE7E,OAAA;YAAA6E,QAAA,EAAQ;UAAM;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,KAAC,EAACxC,YAAY,CAACyC,OAAO;QAAA,eAC7C,CAAC;MAEP;QACE,OAAOzC,YAAY,CAACyC,OAAO;IAC/B;EACF,CAAC;EAED,oBACEnF,OAAA;IAAKsF,SAAS,EAAC,oBAAoB;IAAAT,QAAA,gBACjC7E,OAAA;MAAKsF,SAAS,EAAC,aAAa;MAAAT,QAAA,gBAC1B7E,OAAA;QAAA6E,QAAA,EAAI;MAAS;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAClBlF,OAAA;QAAKsF,SAAS,EAAC,gBAAgB;QAAAT,QAAA,GAC5B/D,WAAW,GAAG,CAAC,iBACdd,OAAA;UACEsF,SAAS,EAAC,mBAAmB;UAC7BC,OAAO,EAAEhC,mBAAoB;UAAAsB,QAAA,EAC9B;QAED;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CACT,eACDlF,OAAA;UACEsF,SAAS,EAAC,mBAAmB;UAC7BC,OAAO,EAAEA,CAAA,KAAMpE,mBAAmB,CAAC,IAAI,CAAE;UAAA0D,QAAA,gBAEzC7E,OAAA;YAAGsF,SAAS,EAAC;UAAoB;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,+CACxC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAENlF,OAAA;MAAKsF,SAAS,EAAC,oBAAoB;MAAAT,QAAA,gBACjC7E,OAAA;QACEsF,SAAS,EAAE,WAAW1E,SAAS,KAAK,KAAK,GAAG,QAAQ,GAAG,EAAE,EAAG;QAC5D2E,OAAO,EAAEA,CAAA,KAAM1E,YAAY,CAAC,KAAK,CAAE;QAAAgE,QAAA,EACpC;MAED;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACTlF,OAAA;QACEsF,SAAS,EAAE,WAAW1E,SAAS,KAAK,QAAQ,GAAG,QAAQ,GAAG,EAAE,EAAG;QAC/D2E,OAAO,EAAEA,CAAA,KAAM1E,YAAY,CAAC,QAAQ,CAAE;QAAAgE,QAAA,GACvC,0BACU,EAAC/D,WAAW,GAAG,CAAC,iBAAId,OAAA;UAAMsF,SAAS,EAAC,OAAO;UAAAT,QAAA,EAAE/D;QAAW;UAAAiE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnE,CAAC,eACTlF,OAAA;QACEsF,SAAS,EAAE,WAAW1E,SAAS,KAAK,aAAa,GAAG,QAAQ,GAAG,EAAE,EAAG;QACpE2E,OAAO,EAAEA,CAAA,KAAM1E,YAAY,CAAC,aAAa,CAAE;QAAAgE,QAAA,EAC5C;MAED;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACTlF,OAAA;QACEsF,SAAS,EAAE,WAAW1E,SAAS,KAAK,OAAO,GAAG,QAAQ,GAAG,EAAE,EAAG;QAC9D2E,OAAO,EAAEA,CAAA,KAAM1E,YAAY,CAAC,OAAO,CAAE;QAAAgE,QAAA,EACtC;MAED;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACTlF,OAAA;QACEsF,SAAS,EAAE,WAAW1E,SAAS,KAAK,QAAQ,GAAG,QAAQ,GAAG,EAAE,EAAG;QAC/D2E,OAAO,EAAEA,CAAA,KAAM1E,YAAY,CAAC,QAAQ,CAAE;QAAAgE,QAAA,EACvC;MAED;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eAENlF,OAAA;MAAKsF,SAAS,EAAC,oBAAoB;MAAAT,QAAA,EAChCrE,OAAO,gBACNR,OAAA;QAAKsF,SAAS,EAAC,mBAAmB;QAAAT,QAAA,gBAChC7E,OAAA;UAAKsF,SAAS,EAAC;QAAS;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC/BlF,OAAA;UAAA6E,QAAA,EAAG;QAAqB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzB,CAAC,GACJxE,KAAK,gBACPV,OAAA;QAAKsF,SAAS,EAAC,eAAe;QAAAT,QAAA,gBAC5B7E,OAAA;UAAGsF,SAAS,EAAC;QAA2B;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC7ClF,OAAA;UAAA6E,QAAA,EAAInE;QAAK;UAAAqE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACX,CAAC,GACJhB,qBAAqB,CAACtB,MAAM,KAAK,CAAC,gBACpC5C,OAAA;QAAKsF,SAAS,EAAC,aAAa;QAAAT,QAAA,gBAC1B7E,OAAA;UAAGsF,SAAS,EAAC;QAAmB;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACrClF,OAAA;UAAA6E,QAAA,EAAG;QAAoC;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxC,CAAC,GAENhB,qBAAqB,CAACf,GAAG,CAACT,YAAY,iBACpC1C,OAAA;QAEEsF,SAAS,EAAE,qBAAqB,CAAC5C,YAAY,CAACC,OAAO,GAAG,QAAQ,GAAG,EAAE,EAAG;QAAAkC,QAAA,gBAExE7E,OAAA;UAAKsF,SAAS,EAAC,mBAAmB;UAAAT,QAAA,eAChC7E,OAAA;YAAGsF,SAAS,EAAEjB,mBAAmB,CAAC3B,YAAY,CAACyB,IAAI;UAAE;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACvD,CAAC,eACNlF,OAAA;UAAKsF,SAAS,EAAC,sBAAsB;UAAAT,QAAA,eACnC7E,OAAA,CAACJ,IAAI;YACH4F,EAAE,EAAElB,mBAAmB,CAAC5B,YAAY,CAAE;YACtC4C,SAAS,EAAC,mBAAmB;YAC7BG,KAAK,EAAE;cAAEC,cAAc,EAAE,MAAM;cAAEC,KAAK,EAAE,SAAS;cAAEC,MAAM,EAAE;YAAU,CAAE;YACvEL,OAAO,EAAEA,CAAA,KAAMvC,gBAAgB,CAACN,YAAY,CAACO,EAAE,CAAE;YAAA4B,QAAA,EAEhDF,mBAAmB,CAACjC,YAAY;UAAC;YAAAqC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC9B;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC;MAAA,GAfDxC,YAAY,CAACO,EAAE;QAAA8B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAgBjB,CACN;IACF;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAGLlE,cAAc,IAAII,oBAAoB,iBACrCpB,OAAA;MAAKsF,SAAS,EAAC,eAAe;MAAAT,QAAA,eAC5B7E,OAAA;QAAKsF,SAAS,EAAC,OAAO;QAAAT,QAAA,gBACpB7E,OAAA;UAAKsF,SAAS,EAAC,cAAc;UAAAT,QAAA,gBAC3B7E,OAAA;YAAA6E,QAAA,EAAI;UAAkB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC3BlF,OAAA;YAAQsF,SAAS,EAAC,WAAW;YAACC,OAAO,EAAEA,CAAA,KAAMtE,iBAAiB,CAAC,KAAK,CAAE;YAAA4D,QAAA,eACpE7E,OAAA;cAAGsF,SAAS,EAAC;YAAc;cAAAP,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1B,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eAENlF,OAAA;UAAKsF,SAAS,EAAC,YAAY;UAAAT,QAAA,gBACzB7E,OAAA;YAAKsF,SAAS,EAAC,kBAAkB;YAAAT,QAAA,gBAC/B7E,OAAA;cAAA6E,QAAA,gBAAG7E,OAAA;gBAAA6E,QAAA,EAAQ;cAAM;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,KAAC,EAAC9D,oBAAoB,CAAC2B,OAAO;YAAA;cAAAgC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAC7DlF,OAAA;cAAMsF,SAAS,EAAC,cAAc;cAAAT,QAAA,EAC3B,IAAIgB,IAAI,CAACzE,oBAAoB,CAAC0E,UAAU,CAAC,CAACC,cAAc,CAAC,OAAO;YAAC;cAAAhB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC9D,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eAENlF,OAAA;YAAMgG,QAAQ,EAAEvC,iBAAkB;YAAAoB,QAAA,gBAChC7E,OAAA;cAAKsF,SAAS,EAAC,YAAY;cAAAT,QAAA,gBACzB7E,OAAA;gBAAA6E,QAAA,EAAO;cAAkB;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACjClF,OAAA;gBACEiG,KAAK,EAAE3E,SAAU;gBACjB4E,QAAQ,EAAGxC,CAAC,IAAKnC,YAAY,CAACmC,CAAC,CAACyC,MAAM,CAACF,KAAK,CAAE;gBAC9CG,WAAW,EAAC,mDAA0B;gBACtCC,IAAI,EAAC,GAAG;gBACRC,QAAQ;cAAA;gBAAAvB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACT,CAAC,eAENlF,OAAA;cAAKsF,SAAS,EAAC,cAAc;cAAAT,QAAA,gBAC3B7E,OAAA;gBACEmE,IAAI,EAAC,QAAQ;gBACbmB,SAAS,EAAC,YAAY;gBACtBC,OAAO,EAAEA,CAAA,KAAMtE,iBAAiB,CAAC,KAAK,CAAE;gBACxCsF,QAAQ,EAAE7E,UAAW;gBAAAmD,QAAA,EACtB;cAED;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTlF,OAAA;gBACEmE,IAAI,EAAC,QAAQ;gBACbmB,SAAS,EAAC,YAAY;gBACtBiB,QAAQ,EAAE7E,UAAU,IAAI,CAACJ,SAAS,CAACsC,IAAI,CAAC,CAAE;gBAAAiB,QAAA,EAEzCnD,UAAU,GAAG,aAAa,GAAG;cAAc;gBAAAqD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACtC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,EAGAhE,gBAAgB,iBACflB,OAAA;MAAKsF,SAAS,EAAC,eAAe;MAAAT,QAAA,eAC5B7E,OAAA;QAAKsF,SAAS,EAAC,OAAO;QAAAT,QAAA,gBACpB7E,OAAA;UAAKsF,SAAS,EAAC,cAAc;UAAAT,QAAA,gBAC3B7E,OAAA;YAAA6E,QAAA,EAAI;UAAsB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAC/BlF,OAAA;YAAQsF,SAAS,EAAC,WAAW;YAACC,OAAO,EAAEA,CAAA,KAAMpE,mBAAmB,CAAC,KAAK,CAAE;YAAA0D,QAAA,eACtE7E,OAAA;cAAGsF,SAAS,EAAC;YAAc;cAAAP,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1B,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eAENlF,OAAA;UAAKsF,SAAS,EAAC,YAAY;UAAAT,QAAA,eACzB7E,OAAA;YAAMgG,QAAQ,EAAE/B,wBAAyB;YAAAY,QAAA,gBACvC7E,OAAA;cAAKsF,SAAS,EAAC,YAAY;cAAAT,QAAA,gBACzB7E,OAAA;gBAAA6E,QAAA,EAAO;cAAkB;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACjClF,OAAA;gBACEiG,KAAK,EAAEzE,YAAa;gBACpB0E,QAAQ,EAAGxC,CAAC,IAAKjC,eAAe,CAACiC,CAAC,CAACyC,MAAM,CAACF,KAAK,CAAE;gBACjDG,WAAW,EAAC,4DAAmC;gBAC/CC,IAAI,EAAC,GAAG;gBACRC,QAAQ;cAAA;gBAAAvB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACT,CAAC,eAENlF,OAAA;cAAKsF,SAAS,EAAC,cAAc;cAAAT,QAAA,gBAC3B7E,OAAA;gBACEmE,IAAI,EAAC,QAAQ;gBACbmB,SAAS,EAAC,YAAY;gBACtBC,OAAO,EAAEA,CAAA,KAAMpE,mBAAmB,CAAC,KAAK,CAAE;gBAC1CoF,QAAQ,EAAE7E,UAAW;gBAAAmD,QAAA,EACtB;cAED;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTlF,OAAA;gBACEmE,IAAI,EAAC,QAAQ;gBACbmB,SAAS,EAAC,YAAY;gBACtBiB,QAAQ,EAAE7E,UAAU,IAAI,CAACF,YAAY,CAACoC,IAAI,CAAC,CAAE;gBAAAiB,QAAA,EAE5CnD,UAAU,GAAG,aAAa,GAAG;cAAc;gBAAAqD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACtC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAC9E,EAAA,CA5bID,iBAAiB;EAAA,QAaJN,WAAW;AAAA;AAAA2G,EAAA,GAbxBrG,iBAAiB;AA8bvB,eAAeA,iBAAiB;AAAC,IAAAqG,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}