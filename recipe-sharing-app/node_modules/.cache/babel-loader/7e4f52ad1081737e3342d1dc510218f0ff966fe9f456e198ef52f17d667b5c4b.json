{"ast":null,"code":"// Tạo file mới với các hàm tiện ích\n\n// Sinh màu ngẫu nhiên cho ảnh đại diện và ảnh công thức\nexport const getRandomColor = () => {\n  const colors = ['#FF6B6B', '#FF8E8E', '#FFA5A5', '#FFBDBD',\n  // Shades of red\n  '#4ECDC4', '#70DBCE', '#92E9D9', '#B4F7E4',\n  // Shades of teal\n  '#FFD166', '#FFD980', '#FFE199', '#FFEAB3',\n  // Shades of yellow\n  '#6B5B95', '#8675A9', '#A18FC0', '#BBA9D7',\n  // Shades of purple\n  '#88D8B0', '#A1E1C1', '#BBE9D3', '#D4F2E4',\n  // Shades of mint\n  '#F38181', '#F59E9E', '#F7BCBC', '#F9DADA' // Shades of salmon\n  ];\n  return colors[Math.floor(Math.random() * colors.length)];\n};\n\n// Hàm tạo ảnh đại diện từ tên người dùng\nexport const generateAvatarUrl = name => {\n  const initials = name.split(' ').map(word => word[0]).join('').toUpperCase().substring(0, 2);\n  const backgroundColor = getRandomColor();\n  const textColor = '#FFFFFF';\n  return `https://ui-avatars.com/api/?name=${encodeURIComponent(initials)}&background=${backgroundColor.substring(1)}&color=${textColor.substring(1)}&size=256&font-size=0.5&bold=true`;\n};\n\n// Cập nhật hàm getRecipeImageUrl để xử lý hình ảnh đúng\nexport const getRecipeImageUrl = recipe => {\n  // Nếu không có ảnh hoặc đường dẫn rỗng\n  if (!recipe.image_url || recipe.image_url === '') {\n    return generateRecipeImageUrl(recipe.title || 'Recipe');\n  }\n\n  // Nếu đường dẫn đã có http/https, trả về nguyên bản\n  if (recipe.image_url.startsWith('http')) {\n    return recipe.image_url;\n  }\n\n  // Fix đường dẫn ảnh - thêm tiền tố server nếu cần\n  if (recipe.image_url && !recipe.image_url.startsWith('/')) {\n    return `http://localhost:5000/uploads/${recipe.image_url}`;\n  }\n\n  // Thêm tiền tố server\n  return `http://localhost:5000${recipe.image_url}`;\n};\n\n// Hàm tạo ảnh món ăn mặc định từ tên món ăn\nexport const generateRecipeImageUrl = title => {\n  // Tạo màu ngẫu nhiên nhưng ổn định dựa trên title\n  const getColorFromString = str => {\n    let hash = 0;\n    for (let i = 0; i < str.length; i++) {\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    }\n    const colors = ['#FF9AA2', '#FFB7B2', '#FFDAC1', '#E2F0CB', '#B5EAD7', '#C7CEEA', '#F8B195', '#F67280', '#C06C84', '#6C5B7B'];\n    return colors[Math.abs(hash) % colors.length];\n  };\n  const backgroundColor = getColorFromString(title);\n  const textColor = '#FFFFFF';\n  return `https://ui-avatars.com/api/?name=${encodeURIComponent(title)}&background=${backgroundColor.substring(1)}&color=${textColor.substring(1)}&size=256&font-size=0.33&bold=true`;\n};","map":{"version":3,"names":["getRandomColor","colors","Math","floor","random","length","generateAvatarUrl","name","initials","split","map","word","join","toUpperCase","substring","backgroundColor","textColor","encodeURIComponent","getRecipeImageUrl","recipe","image_url","generateRecipeImageUrl","title","startsWith","getColorFromString","str","hash","i","charCodeAt","abs"],"sources":["C:/Users/Lenovo/Documents/web_SE/recipe-sharing-app/src/utils/imageUtils.js"],"sourcesContent":["// Tạo file mới với các hàm tiện ích\r\n\r\n// Sinh màu ngẫu nhiên cho ảnh đại diện và ảnh công thức\r\nexport const getRandomColor = () => {\r\n  const colors = [\r\n    '#FF6B6B', '#FF8E8E', '#FFA5A5', '#FFBDBD',  // Shades of red\r\n    '#4ECDC4', '#70DBCE', '#92E9D9', '#B4F7E4',  // Shades of teal\r\n    '#FFD166', '#FFD980', '#FFE199', '#FFEAB3',  // Shades of yellow\r\n    '#6B5B95', '#8675A9', '#A18FC0', '#BBA9D7',  // Shades of purple\r\n    '#88D8B0', '#A1E1C1', '#BBE9D3', '#D4F2E4',  // Shades of mint\r\n    '#F38181', '#F59E9E', '#F7BCBC', '#F9DADA',  // Shades of salmon\r\n  ];\r\n  \r\n  return colors[Math.floor(Math.random() * colors.length)];\r\n};\r\n\r\n// Hàm tạo ảnh đại diện từ tên người dùng\r\nexport const generateAvatarUrl = (name) => {\r\n  const initials = name\r\n    .split(' ')\r\n    .map(word => word[0])\r\n    .join('')\r\n    .toUpperCase()\r\n    .substring(0, 2);\r\n  \r\n  const backgroundColor = getRandomColor();\r\n  const textColor = '#FFFFFF';\r\n  \r\n  return `https://ui-avatars.com/api/?name=${encodeURIComponent(initials)}&background=${backgroundColor.substring(1)}&color=${textColor.substring(1)}&size=256&font-size=0.5&bold=true`;\r\n};\r\n\r\n// Cập nhật hàm getRecipeImageUrl để xử lý hình ảnh đúng\r\nexport const getRecipeImageUrl = (recipe) => {\r\n  // Nếu không có ảnh hoặc đường dẫn rỗng\r\n  if (!recipe.image_url || recipe.image_url === '') {\r\n    return generateRecipeImageUrl(recipe.title || 'Recipe');\r\n  }\r\n  \r\n  // Nếu đường dẫn đã có http/https, trả về nguyên bản\r\n  if (recipe.image_url.startsWith('http')) {\r\n    return recipe.image_url;\r\n  }\r\n  \r\n  // Fix đường dẫn ảnh - thêm tiền tố server nếu cần\r\n  if (recipe.image_url && !recipe.image_url.startsWith('/')) {\r\n    return `http://localhost:5000/uploads/${recipe.image_url}`;\r\n  }\r\n  \r\n  // Thêm tiền tố server\r\n  return `http://localhost:5000${recipe.image_url}`;\r\n};\r\n\r\n// Hàm tạo ảnh món ăn mặc định từ tên món ăn\r\nexport const generateRecipeImageUrl = (title) => {\r\n  // Tạo màu ngẫu nhiên nhưng ổn định dựa trên title\r\n  const getColorFromString = (str) => {\r\n    let hash = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\r\n    }\r\n    \r\n    const colors = [\r\n      '#FF9AA2', '#FFB7B2', '#FFDAC1', '#E2F0CB', '#B5EAD7', \r\n      '#C7CEEA', '#F8B195', '#F67280', '#C06C84', '#6C5B7B'\r\n    ];\r\n    \r\n    return colors[Math.abs(hash) % colors.length];\r\n  };\r\n  \r\n  const backgroundColor = getColorFromString(title);\r\n  const textColor = '#FFFFFF';\r\n  \r\n  return `https://ui-avatars.com/api/?name=${encodeURIComponent(title)}&background=${backgroundColor.substring(1)}&color=${textColor.substring(1)}&size=256&font-size=0.33&bold=true`;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}