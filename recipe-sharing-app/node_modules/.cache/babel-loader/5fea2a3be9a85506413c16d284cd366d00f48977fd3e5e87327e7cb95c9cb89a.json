{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\Documents\\\\web_SE\\\\recipe-sharing-app\\\\src\\\\hooks\\\\useAuth.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport ProfileHeader from '../components/profile/ProfileHeader';\nimport UserPosts from '../components/profile/UserPosts';\nimport UserStats from '../components/profile/UserStats';\nimport Followers from '../components/profile/Followers';\nimport Following from '../components/profile/Following';\nimport { useAuth } from '../hooks/useAuth';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UserProfilePage = () => {\n  _s();\n  const {\n    currentUser,\n    isAuthenticated\n  } = useAuth();\n  const [loading, setLoading] = useState(true);\n  const [profileData, setProfileData] = useState(null);\n  const {\n    userId\n  } = useParams();\n  const navigate = useNavigate();\n\n  // Debug\n  console.log(\"UserProfilePage render - currentUser:\", currentUser);\n  console.log(\"UserProfilePage render - userId from params:\", userId);\n  useEffect(() => {\n    const fetchProfileData = async () => {\n      try {\n        // Nếu không có userId trong URL, sử dụng currentUser\n        if (!userId && currentUser) {\n          console.log(\"Using currentUser data:\", currentUser);\n          setProfileData(currentUser);\n          setLoading(false);\n          return;\n        }\n\n        // Nếu có userId, lấy thông tin từ API\n        if (userId) {\n          console.log(\"Fetching profile for userId:\", userId);\n          const token = localStorage.getItem('token');\n          const headers = token ? {\n            'Authorization': `Bearer ${token}`\n          } : {};\n          const response = await fetch(`http://localhost:5000/api/users/${userId}`, {\n            headers\n          });\n          if (response.ok) {\n            const data = await response.json();\n            console.log(\"Profile data received:\", data);\n            setProfileData(data.data);\n          } else {\n            console.error(\"Failed to fetch profile:\", response.status);\n            navigate('/not-found');\n          }\n        } else if (!currentUser) {\n          // Không có userId và currentUser\n          console.log(\"No userId or currentUser, redirecting to login\");\n          navigate('/login');\n          return;\n        }\n      } catch (error) {\n        console.error(\"Error fetching user profile:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchProfileData();\n  }, [userId, currentUser, navigate]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"\\u0110ang t\\u1EA3i...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 16\n    }, this);\n  }\n  if (!profileData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: \"Kh\\xF4ng th\\u1EC3 t\\u1EA3i th\\xF4ng tin ng\\u01B0\\u1EDDi d\\xF9ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-profile-page\",\n    children: [/*#__PURE__*/_jsxDEV(ProfileHeader, {\n      user: profileData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(UserStats, {\n      user: profileData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), profileData.id && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Followers, {\n        userId: profileData.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Following, {\n        userId: profileData.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(UserPosts, {\n        userId: profileData.id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"details\", {\n      style: {\n        margin: '20px',\n        padding: '10px',\n        border: '1px dashed #ccc'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n        children: \"Debug Info\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        children: [\"ProfileData: \", JSON.stringify(profileData, null, 2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        children: [\"CurrentUser: \", JSON.stringify(currentUser, null, 2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), profileData ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: profileData.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: profileData.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Kh\\xF4ng t\\xECm th\\u1EA5y th\\xF4ng tin ng\\u01B0\\u1EDDi d\\xF9ng.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n};\n_s(UserProfilePage, \"YU4SGQE/EVZet/bwa4qg75Vy3Ak=\", false, function () {\n  return [useAuth, useParams, useNavigate];\n});\n_c = UserProfilePage;\nexport default UserProfilePage;\n\n// Trong Followers.jsx và Following.jsx\nuseEffect(() => {\n  if (!userId) {\n    console.log(\"No userId provided, skipping API call\");\n    setLoading(false);\n    return;\n  }\n\n  // Tiếp tục với API call...\n}, [userId]);\nvar _c;\n$RefreshReg$(_c, \"UserProfilePage\");","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","ProfileHeader","UserPosts","UserStats","Followers","Following","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","UserProfilePage","_s","currentUser","isAuthenticated","loading","setLoading","profileData","setProfileData","userId","navigate","console","log","fetchProfileData","token","localStorage","getItem","headers","response","fetch","ok","data","json","error","status","className","children","fileName","_jsxFileName","lineNumber","columnNumber","user","id","style","margin","padding","border","JSON","stringify","name","email","_c","$RefreshReg$"],"sources":["C:/Users/Lenovo/Documents/web_SE/recipe-sharing-app/src/hooks/useAuth.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport ProfileHeader from '../components/profile/ProfileHeader';\nimport UserPosts from '../components/profile/UserPosts';\nimport UserStats from '../components/profile/UserStats';\nimport Followers from '../components/profile/Followers';\nimport Following from '../components/profile/Following';\nimport { useAuth } from '../hooks/useAuth';\n\nconst UserProfilePage = () => {\n    const { currentUser, isAuthenticated } = useAuth();\n    const [loading, setLoading] = useState(true);\n    const [profileData, setProfileData] = useState(null);\n    const { userId } = useParams();\n    const navigate = useNavigate();\n\n    // Debug\n    console.log(\"UserProfilePage render - currentUser:\", currentUser);\n    console.log(\"UserProfilePage render - userId from params:\", userId);\n\n    useEffect(() => {\n        const fetchProfileData = async () => {\n            try {\n                // Nếu không có userId trong URL, sử dụng currentUser\n                if (!userId && currentUser) {\n                    console.log(\"Using currentUser data:\", currentUser);\n                    setProfileData(currentUser);\n                    setLoading(false);\n                    return;\n                }\n                \n                // Nếu có userId, lấy thông tin từ API\n                if (userId) {\n                    console.log(\"Fetching profile for userId:\", userId);\n                    const token = localStorage.getItem('token');\n                    const headers = token ? { 'Authorization': `Bearer ${token}` } : {};\n                    \n                    const response = await fetch(`http://localhost:5000/api/users/${userId}`, { headers });\n                    \n                    if (response.ok) {\n                        const data = await response.json();\n                        console.log(\"Profile data received:\", data);\n                        setProfileData(data.data);\n                    } else {\n                        console.error(\"Failed to fetch profile:\", response.status);\n                        navigate('/not-found');\n                    }\n                } else if (!currentUser) {\n                    // Không có userId và currentUser\n                    console.log(\"No userId or currentUser, redirecting to login\");\n                    navigate('/login');\n                    return;\n                }\n            } catch (error) {\n                console.error(\"Error fetching user profile:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n        \n        fetchProfileData();\n    }, [userId, currentUser, navigate]);\n    \n    if (loading) {\n        return <div className=\"loading\">Đang tải...</div>;\n    }\n    \n    if (!profileData) {\n        return <div className=\"error\">Không thể tải thông tin người dùng</div>;\n    }\n\n    return (\n        <div className=\"user-profile-page\">\n            <ProfileHeader user={profileData} />\n            <UserStats user={profileData} />\n            {profileData.id && (\n                <>\n                    <Followers userId={profileData.id} />\n                    <Following userId={profileData.id} />\n                    <UserPosts userId={profileData.id} />\n                </>\n            )}\n            \n            {/* Debug info */}\n            <details style={{margin: '20px', padding: '10px', border: '1px dashed #ccc'}}>\n                <summary>Debug Info</summary>\n                <pre>ProfileData: {JSON.stringify(profileData, null, 2)}</pre>\n                <pre>CurrentUser: {JSON.stringify(currentUser, null, 2)}</pre>\n            </details>\n\n            {profileData ? (\n                <div>\n                    <h1>{profileData.name}</h1>\n                    <p>{profileData.email}</p>\n                    {/* ... */}\n                </div>\n            ) : (\n                <div>Không tìm thấy thông tin người dùng.</div>\n            )}\n        </div>\n    );\n};\n\nexport default UserProfilePage;\n\n// Trong Followers.jsx và Following.jsx\nuseEffect(() => {\n    if (!userId) {\n        console.log(\"No userId provided, skipping API call\");\n        setLoading(false);\n        return;\n    }\n\n    // Tiếp tục với API call...\n}, [userId]);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}