{"ast":null,"code":"// Monkey patch fetch để tự động thêm token\nconst originalFetch = window.fetch;\nwindow.fetch = async (url, options = {}) => {\n  // Nếu là URL tương đối hoặc từ localhost:5000\n  if (url.startsWith('/api') || url.includes('localhost:5000')) {\n    const token = localStorage.getItem('token');\n\n    // Thêm token vào header nếu có\n    if (token) {\n      options = {\n        ...options,\n        headers: {\n          ...options.headers,\n          'Authorization': `Bearer ${token}`\n        }\n      };\n    }\n    console.log(`Fetch to ${url} with token: ${token ? 'YES' : 'NO'}`);\n  }\n  return originalFetch(url, options);\n};\nexport default function setupFetchInterceptor() {\n  // Phương thức này được gọi trong App.jsx để thiết lập interceptor\n  console.log('Fetch interceptor set up');\n}","map":{"version":3,"names":["originalFetch","window","fetch","url","options","startsWith","includes","token","localStorage","getItem","headers","console","log","setupFetchInterceptor"],"sources":["C:/Users/Lenovo/Documents/web_SE/recipe-sharing-app/src/utils/fetchInterceptor.js"],"sourcesContent":["// Monkey patch fetch để tự động thêm token\r\nconst originalFetch = window.fetch;\r\n\r\nwindow.fetch = async (url, options = {}) => {\r\n  // Nếu là URL tương đối hoặc từ localhost:5000\r\n  if (url.startsWith('/api') || url.includes('localhost:5000')) {\r\n    const token = localStorage.getItem('token');\r\n    \r\n    // Thêm token vào header nếu có\r\n    if (token) {\r\n      options = {\r\n        ...options,\r\n        headers: {\r\n          ...options.headers,\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      };\r\n    }\r\n    \r\n    console.log(`Fetch to ${url} with token: ${token ? 'YES' : 'NO'}`);\r\n  }\r\n  \r\n  return originalFetch(url, options);\r\n};\r\n\r\nexport default function setupFetchInterceptor() {\r\n  // Phương thức này được gọi trong App.jsx để thiết lập interceptor\r\n  console.log('Fetch interceptor set up');\r\n}"],"mappings":"AAAA;AACA,MAAMA,aAAa,GAAGC,MAAM,CAACC,KAAK;AAElCD,MAAM,CAACC,KAAK,GAAG,OAAOC,GAAG,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EAC1C;EACA,IAAID,GAAG,CAACE,UAAU,CAAC,MAAM,CAAC,IAAIF,GAAG,CAACG,QAAQ,CAAC,gBAAgB,CAAC,EAAE;IAC5D,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;;IAE3C;IACA,IAAIF,KAAK,EAAE;MACTH,OAAO,GAAG;QACR,GAAGA,OAAO;QACVM,OAAO,EAAE;UACP,GAAGN,OAAO,CAACM,OAAO;UAClB,eAAe,EAAE,UAAUH,KAAK;QAClC;MACF,CAAC;IACH;IAEAI,OAAO,CAACC,GAAG,CAAC,YAAYT,GAAG,gBAAgBI,KAAK,GAAG,KAAK,GAAG,IAAI,EAAE,CAAC;EACpE;EAEA,OAAOP,aAAa,CAACG,GAAG,EAAEC,OAAO,CAAC;AACpC,CAAC;AAED,eAAe,SAASS,qBAAqBA,CAAA,EAAG;EAC9C;EACAF,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;AACzC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}